<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/%E6%A0%91%E5%8F%B6_sleaves%20(1).png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/%E6%A0%91%E5%8F%B6_sleaves.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="/lib/pace/pace-theme-minimal.min.css">
  <script src="/lib/pace/pace.min.js"></script>

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"zihang.fun","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"hide","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":"flat"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"manual","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="只有努力不会辜负你">
<meta property="og:type" content="website">
<meta property="og:title" content="枫叶冢">
<meta property="og:url" content="http://zihang.fun/page/2/index.html">
<meta property="og:site_name" content="枫叶冢">
<meta property="og:description" content="只有努力不会辜负你">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="liu zihang">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://zihang.fun/page/2/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>枫叶冢</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/rss2.xml" title="枫叶冢" type="application/rss+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>
    <a target="_blank" rel="noopener" href="https://github.com/han2044953296" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#fff; color:#151513; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">枫叶冢</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-schedule">

    <a href="/schedule/" rel="section"><i class="fa fa-calendar fa-fw"></i>日程表</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://zihang.fun/2022/11/30/11-30/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="liu zihang">
      <meta itemprop="description" content="只有努力不会辜负你">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="枫叶冢">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/11/30/11-30/" class="post-title-link" itemprop="url">hive第二天</a>
        </h2>

        <div class="post-meta">
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-11-30 09:57:50" itemprop="dateCreated datePublished" datetime="2022-11-30T09:57:50+08:00">2022-11-30</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-12-03 12:09:03" itemprop="dateModified" datetime="2022-12-03T12:09:03+08:00">2022-12-03</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%97%A5%E5%BF%97/" itemprop="url" rel="index"><span itemprop="name">日志</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>4.4k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>4 分钟</span>
            </span>

        </div>
      </header>

    
    
    

   

    <div class="post-body" itemprop="articleBody">

      
          <h1 id="关于hive里的数据类型"><a href="#关于hive里的数据类型" class="headerlink" title="关于hive里的数据类型"></a>关于hive里的数据类型</h1><ul>
<li>整数<ul>
<li>int</li>
<li>bigint &#x3D;&#x3D;long</li>
</ul>
</li>
<li>小数 ：<ul>
<li>float</li>
<li>double</li>
<li>Decimal</li>
</ul>
</li>
<li>字符串：<ul>
<li>String (建议统一用String)</li>
<li>varchar</li>
<li>char</li>
</ul>
</li>
<li>时间：<ul>
<li>时间日期 DATE 格式：YYYY-MM-DD</li>
<li>时间戳：TIMESTAMP YYYY-MM-DD HH:MM:SS</li>
</ul>
</li>
</ul>
<h1 id="建表"><a href="#建表" class="headerlink" title="建表"></a>建表</h1><p>CREATE [TEMPORARY] [EXTERNAL] TABLE [IF NOT EXISTS] [db_name.]table_name<br>  [(col_name data_type [column_constraint_specification] [COMMENT col_comment], … [constraint_specification])]<br>  [COMMENT table_comment]<br>  [PARTITIONED BY (col_name data_type [COMMENT col_comment], …)]<br>  [CLUSTERED BY (col_name, col_name, …) [SORTED BY (col_name [ASC|DESC], …)] INTO num_buckets BUCKETS]<br>  [<br>   [ROW FORMAT row_format]<br>   [STORED AS file_format]<br>     | STORED BY ‘storage.handler.class.name’ [WITH SERDEPROPERTIES (…)]  – (Note: Available in Hive 0.6.0 and later)<br>  ]</p>
<p>数据字段名字 字段类型</p>
<p>例如</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> mytest(<br>	id String <span class="hljs-keyword">comment</span> <span class="hljs-string">&#x27;用户id&#x27;</span>,<br>	<span class="hljs-type">name</span> string,<br>	age <span class="hljs-type">bigint</span><br>) <span class="hljs-keyword">comment</span> <span class="hljs-string">&#x27;第一个表&#x27;</span><br><span class="hljs-keyword">ROW</span> <span class="hljs-keyword">FORMAT</span> delimited fields terminated <span class="hljs-keyword">by</span> <span class="hljs-string">&#x27;,&#x27;</span> //指定分隔符<br>STORED <span class="hljs-keyword">as</span> TEXTFILE; // 存储形式<br><br>或者<br><br><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> emp2 <span class="hljs-keyword">like</span> emp;<br>复制表结构<br><br>或者<br></code></pre></td></tr></table></figure>

<h2 id="为什么要分隔符"><a href="#为什么要分隔符" class="headerlink" title="为什么要分隔符"></a>为什么要分隔符</h2><p>因为我们的元数据都在hdfs上，对于hdfs上的数据可以通过分隔符进行自动导入到hive里，比如上述是，分割的，然后我hdfs上有如下数据</p>
<p>1，zihan,11</p>
<p>2,zhangsan,23</p>
<p>3,liu,33</p>
<p>就会自动按照每一行进行insert</p>
<p>导入数据 ： load data local inpath ‘本地的绝对路径’ into table 表名</p>
<p>清空表的操作 ： truncate table 表名</p>
<h1 id="删除库"><a href="#删除库" class="headerlink" title="删除库"></a>删除库</h1><p>DROP (DATABASE|SCHEMA) [IF EXISTS] database_name [RESTRICT|CASCADE];</p>
<p>DROP DATABASE bigdata_hive4;</p>
<p>DROP DATABASE bigdata_hive2 CASCADE; &#x3D;&gt;删库跑路的操作</p>
<p>CASCADE : 代表联合删除 ，一般删除的时候如果里面有表，会造成无法删除的问题，但是联合删除会直接删除掉</p>
<h1 id="DMl"><a href="#DMl" class="headerlink" title="DMl"></a>DMl</h1><h2 id="load-："><a href="#load-：" class="headerlink" title="load ："></a>load ：</h2><ul>
<li>加载本地数据</li>
<li>加载hdfs上的数据</li>
</ul>
<p>LOAD原本是追加，不是覆盖 ， 但是可以通过 加上 overwrite 关键字 进行 覆盖操作</p>
<h2 id="覆盖例子"><a href="#覆盖例子" class="headerlink" title="覆盖例子"></a>覆盖例子</h2><p>load data local inpath ‘&#x2F;home&#x2F;hadoop&#x2F;tmp&#x2F;emp.txt’ OVERWRITE INTO TABLE emp;</p>
<h2 id="上传"><a href="#上传" class="headerlink" title="上传"></a>上传</h2><p>本地：load data inpath ‘本地路径’ into table 表名</p>
<p>hdfs ： load data inpath ‘hdfs上的路径’ into table 表名</p>
<p>上述的hdfs上的相当于把其路径里的文件移动到table 表名的下面 并且改名，且关联到metastore</p>
<p>但是我们的hdfs mv 是不会关联到metastore的</p>
<p>在hive 里 update 和 delete 不要做 &#x3D;》 因为效率低下</p>
<p>把所有的update和delete都转化成insert和overwrite</p>
<h2 id="插入语句-："><a href="#插入语句-：" class="headerlink" title="插入语句 ："></a>插入语句 ：</h2><p>Inserting data into Hive Tables from queries</p>
<p>insert into|OVERWRITE table tablename selectQury</p>
<p>2.Inserting values into tables from SQL 【不推荐使用】<br>INSERT INTO TABLE tablename<br>VALUES values_row [, values_row …]<br>1.每导入一条数据 就会触发一次 mapreduce job  效率太低</p>
<p>emp2：<br>    insert into table emp2<br>    select *  from emp;<br>insert overwrite table emp2<br>select *  from emp where deptno&#x3D;10;</p>
<h2 id="关于hive里的一些函数以及使用"><a href="#关于hive里的一些函数以及使用" class="headerlink" title="关于hive里的一些函数以及使用"></a>关于hive里的一些函数以及使用</h2><h3 id="1-where-过滤条件"><a href="#1-where-过滤条件" class="headerlink" title="1.where 过滤条件"></a>1.where 过滤条件</h3><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">where_condition<br>	 &lt;<br>	 &gt;<br>	 =<br>	 &lt;&gt;  !=<br>	 <span class="hljs-keyword">and</span><br><span class="hljs-keyword"></span>	 <span class="hljs-keyword">or</span><br><span class="hljs-keyword"></span>	 in<br>	 not in<br>	 <span class="hljs-keyword">between </span> <span class="hljs-keyword">and</span><br><span class="hljs-keyword"></span>	 is<br>	 is not<br></code></pre></td></tr></table></figure>

<h3 id="需求：查询表中-deptno-20-10"><a href="#需求：查询表中-deptno-20-10" class="headerlink" title="需求：查询表中 deptno 20 10"></a>需求：查询表中 deptno 20 10</h3><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-keyword">select</span><br>*<br><span class="hljs-keyword">from</span> emp<br><span class="hljs-keyword">where</span> deptno=<span class="hljs-number">20</span> <span class="hljs-keyword">or</span> deptno =<span class="hljs-number">10</span>;<br><br><span class="hljs-keyword">select</span><br>*<br><span class="hljs-function"><span class="hljs-keyword">from</span> emp</span><br><span class="hljs-function"><span class="hljs-keyword">where</span> deptno <span class="hljs-title">in</span> (<span class="hljs-params"><span class="hljs-number">10</span>,<span class="hljs-number">20</span></span>)</span>;<br><br><span class="hljs-keyword">select</span><br>*<br><span class="hljs-keyword">from</span> emp<br><span class="hljs-keyword">where</span> deptno &lt;&gt; <span class="hljs-number">20</span>;<br><span class="hljs-keyword">select</span><br>*<br><span class="hljs-keyword">from</span> emp<br><span class="hljs-keyword">where</span> deptno != <span class="hljs-number">20</span>;<br></code></pre></td></tr></table></figure>

<h3 id="2-order-by-排序语法"><a href="#2-order-by-排序语法" class="headerlink" title="2.order by  排序语法"></a>2.order by  排序语法</h3><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-number">1.</span>默认<span class="hljs-keyword">asc</span> 升序<br><span class="hljs-number">2.</span>降序 <span class="hljs-keyword">desc</span><br><br><span class="hljs-keyword">select</span><br>sal<br><span class="hljs-keyword">from</span> emp<br><span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> sal <span class="hljs-keyword">desc</span>;<br></code></pre></td></tr></table></figure>

<h3 id="3-like-语法-模糊匹配"><a href="#3-like-语法-模糊匹配" class="headerlink" title="3.like 语法 模糊匹配"></a>3.like 语法 模糊匹配</h3><figure class="highlight erlang-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs erlang-repl"><span class="hljs-number">1</span>._  占位符<br><span class="hljs-number">2</span>.<span class="hljs-comment">%  模糊</span><br>rlike regexp<br></code></pre></td></tr></table></figure>

<h3 id="4-合并表"><a href="#4-合并表" class="headerlink" title="4.合并表"></a>4.合并表</h3><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs arcade"><span class="hljs-built_in">union</span>  去重<br><br><span class="hljs-built_in">union</span> <span class="hljs-built_in">all</span>  不去重<br></code></pre></td></tr></table></figure>

<h3 id="例子："><a href="#例子：" class="headerlink" title="例子："></a>例子：</h3><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> a(id <span class="hljs-type">int</span> ,<span class="hljs-type">name</span> string) <span class="hljs-keyword">row</span> <span class="hljs-keyword">format</span>  delimited fields terminated <span class="hljs-keyword">by</span> <span class="hljs-string">&#x27;,&#x27;</span> ;<br><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> b(id <span class="hljs-type">int</span> ,<span class="hljs-type">name</span> string) <span class="hljs-keyword">row</span> <span class="hljs-keyword">format</span>  delimited fields terminated <span class="hljs-keyword">by</span> <span class="hljs-string">&#x27;,&#x27;</span> ;<br><br><span class="hljs-keyword">load</span> data <span class="hljs-keyword">local</span> inpath &quot;/home/hadoop/tmp/a.txt&quot; <span class="hljs-keyword">into</span> <span class="hljs-keyword">table</span> a;<br><span class="hljs-keyword">load</span> data <span class="hljs-keyword">local</span> inpath &quot;/home/hadoop/tmp/b.txt&quot; <span class="hljs-keyword">into</span> <span class="hljs-keyword">table</span> b;<br><br><span class="hljs-keyword">select</span> <span class="hljs-type">name</span> <span class="hljs-keyword">from</span> a<br><span class="hljs-keyword">union</span> <span class="hljs-keyword">all</span><br><span class="hljs-keyword">select</span> <span class="hljs-type">name</span> <span class="hljs-keyword">from</span> b;<br><br><span class="hljs-keyword">select</span> <span class="hljs-type">name</span> <span class="hljs-keyword">from</span> a<br><span class="hljs-keyword">union</span> <span class="hljs-keyword">all</span><br><span class="hljs-keyword">select</span> <span class="hljs-type">name</span> <span class="hljs-keyword">from</span> b<br><span class="hljs-keyword">union</span> <span class="hljs-keyword">all</span><br><span class="hljs-keyword">select</span> &quot;lisi&quot; <span class="hljs-keyword">as</span> <span class="hljs-type">name</span> ;<br><br><span class="hljs-keyword">select</span> <span class="hljs-type">name</span>,&quot;1&quot; <span class="hljs-keyword">as</span> pk <span class="hljs-keyword">from</span> a<br><span class="hljs-keyword">union</span> <span class="hljs-keyword">all</span><br><span class="hljs-keyword">select</span> <span class="hljs-type">name</span>,&quot;2&quot; <span class="hljs-keyword">as</span> pk <span class="hljs-keyword">from</span> b<br><span class="hljs-keyword">union</span> <span class="hljs-keyword">all</span><br><span class="hljs-keyword">select</span> &quot;lisi&quot; <span class="hljs-keyword">as</span> <span class="hljs-type">name</span>,&quot;3&quot; <span class="hljs-keyword">as</span> id ;<br></code></pre></td></tr></table></figure>

<p>思考： hive建表 默认column 分割符是什么？</p>
<h3 id="5-null-处理"><a href="#5-null-处理" class="headerlink" title="5.null 处理"></a>5.null 处理</h3><pre><code>1. 过滤
    where xxx is not null
is null 作用一样 &lt;=&gt;
2. etl 转换
    ifnull  =&gt; hive里没有
    coalesce =》
    nvl  =》
</code></pre>
<h3 id="补充："><a href="#补充：" class="headerlink" title="补充："></a>补充：</h3><pre><code>查看hive支持的function ：
            y=f(x)
    SHOW FUNCTIONS [LIKE &quot;`&lt;pattern&gt;`&quot;];
    show functions like nvl;  =&gt; 判断 function hive 是否存在
    desc function nvl; =》  查看某个函数具体使用
</code></pre>
<figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs autohotkey">select<br><span class="hljs-built_in">empno,</span><br><span class="hljs-built_in">ename,</span><br><span class="hljs-built_in">job,</span><br><span class="hljs-built_in">mgr,</span><br><span class="hljs-built_in">hiredate,</span><br><span class="hljs-built_in">sal,</span><br>nvl(comm,<span class="hljs-number">0</span>) as comm_alias,<br>deptno<br>from emp <span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure>

<h2 id="分组-聚合函数-join"><a href="#分组-聚合函数-join" class="headerlink" title="分组 聚合函数 join"></a>分组 聚合函数 join</h2><p>聚合函数 ：</p>
<ul>
<li>sum</li>
<li>max</li>
<li>min</li>
<li>avg</li>
<li>count</li>
</ul>
<h3 id="group-by"><a href="#group-by" class="headerlink" title="group by"></a>group by</h3><ul>
<li>和聚合函数一起使用</li>
<li>一个或者多个colum进行分组</li>
<li>字段必须select出现 和 group by 出现要一致</li>
</ul>
<h3 id="having-："><a href="#having-：" class="headerlink" title="having ："></a>having ：</h3><ul>
<li>在group by 后面使用</li>
</ul>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs stylus">select job,<br><br><span class="hljs-function"><span class="hljs-title">sum</span><span class="hljs-params">(sal)</span></span> as sal_num,<br><br><span class="hljs-function"><span class="hljs-title">max</span><span class="hljs-params">(sal)</span></span>,<br><br><span class="hljs-function"><span class="hljs-title">min</span><span class="hljs-params">(sal)</span></span>,<br><br><span class="hljs-function"><span class="hljs-title">avg</span><span class="hljs-params">(sal)</span></span>,<br><br><span class="hljs-function"><span class="hljs-title">count</span><span class="hljs-params">(<span class="hljs-number">1</span>)</span></span> as cnt<br><br>from emp<br><br>group by job<br><br>having sal_num &gt; <span class="hljs-number">6000</span><br></code></pre></td></tr></table></figure>

<h3 id="join"><a href="#join" class="headerlink" title="join"></a>join</h3><p>找准关联字段</p>
<ul>
<li>inner join [join]</li>
<li>left join</li>
<li>right join</li>
<li>full join</li>
</ul>
<h3 id="需求：既要显示聚合前的数据，又要显示聚合后的数据？"><a href="#需求：既要显示聚合前的数据，又要显示聚合后的数据？" class="headerlink" title="需求：既要显示聚合前的数据，又要显示聚合后的数据？"></a>需求：既要显示聚合前的数据，又要显示聚合后的数据？</h3><p>函数  over([partition by xxx,…] [order by xxx,….])</p>
<p>over: 以谁进行开窗 table、<br>parition by : 以谁进行分组   table columns<br>order by : 以谁进行排序  table columns</p>
<figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs subunit">数据： <br>haige,2022<span class="hljs-string">-11</span><span class="hljs-string">-10</span>,1<br>haige,2022<span class="hljs-string">-11</span><span class="hljs-string">-11</span>,5<br>haige,2022<span class="hljs-string">-11</span><span class="hljs-string">-12</span>,7<br>haige,2022<span class="hljs-string">-11</span><span class="hljs-string">-13</span>,3<br>haige,2022<span class="hljs-string">-11</span><span class="hljs-string">-14</span>,2<br>haige,2022<span class="hljs-string">-11</span><span class="hljs-string">-15</span>,4<br>haige,2022<span class="hljs-string">-11</span><span class="hljs-string">-16</span>,4<br></code></pre></td></tr></table></figure>

<p>需求：<br>    统计累计问题 ，每个用户每天累计点外卖次数</p>
<p>[partition by xxx,…] [order by xxx,….]</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">select</span> <br><span class="hljs-type">name</span> ,<br>dt ,<br>cnt ,<br>sum(cnt) <span class="hljs-keyword">over</span>(<span class="hljs-keyword">partition</span> <span class="hljs-keyword">by</span> <span class="hljs-type">name</span>  <span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> dt ) <span class="hljs-keyword">as</span> sum_cnt<br><span class="hljs-keyword">from</span> user_mt;<br></code></pre></td></tr></table></figure>

<h3 id="命令行更改"><a href="#命令行更改" class="headerlink" title="命令行更改"></a>命令行更改</h3><p>command line<br>    1.hive shell<br>    2.jdbc &#x3D;&gt; hiveServer2</p>
<pre><code>hive clinet:
    1. hive shell
    2. beeline shell jdbc   开启 hiveServer2 服务 thift
</code></pre>
<p>在beeline中 <code>!connect jdbc:hive2://localhost:10000 hadoop</code></p>
<p>补充：<br>beeline &#x3D;&gt; 连接 hive  &#x3D;》 hdfs<br>对hdfs 做一个设置 代理设置：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs xml">core-site.xml:<br><span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span><br>	<span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>hadoop.proxyuser.hadoop.hosts<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><br>	<span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>*<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span><br>	<span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>hadoop.proxyuser.hadoop.groups<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><br>	<span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>*<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br></code></pre></td></tr></table></figure>

      
    </div>

    
    
    

      
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://zihang.fun/2022/11/29/11-29/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="liu zihang">
      <meta itemprop="description" content="只有努力不会辜负你">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="枫叶冢">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/11/29/11-29/" class="post-title-link" itemprop="url">hive</a>
        </h2>

        <div class="post-meta">
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-11-29 08:36:32" itemprop="dateCreated datePublished" datetime="2022-11-29T08:36:32+08:00">2022-11-29</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-11-30 22:00:51" itemprop="dateModified" datetime="2022-11-30T22:00:51+08:00">2022-11-30</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%97%A5%E5%BF%97/" itemprop="url" rel="index"><span itemprop="name">日志</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>5.2k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>5 分钟</span>
            </span>

        </div>
      </header>

    
    
    

   

    <div class="post-body" itemprop="articleBody">

      
          <h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><p>简单来说就是用sql处理hadoop的数据的</p>
<p>除了hive之外 ： sparksql ，presto ， impala</p>
<h2 id="要求掌握"><a href="#要求掌握" class="headerlink" title="要求掌握"></a>要求掌握</h2><p>sql</p>
<p>udf</p>
<h2 id="hadoop包含"><a href="#hadoop包含" class="headerlink" title="hadoop包含"></a>hadoop包含</h2><p>hdfs ：命令行</p>
<p>mapreduce ：目前工作中几乎不用，但是关于核心类和思想要掌握</p>
<p>yarn：提交作业 xxx （mr&#x2F;spark&#x2F;flink）on yarn ： 必须会</p>
<p>mapreduce的弊端 ：</p>
<ul>
<li>开发大量代码</li>
<li>编程基础不错</li>
<li>部署麻烦</li>
<li>修改code蛮麻烦</li>
<li>对于DBA和RDBMS的小伙伴是不友好的</li>
</ul>
<p>大数据处理来说最终落地最好是sql</p>
<p>大数据开发角度 ：</p>
<ul>
<li>基础平台开发<ul>
<li>涉及很多框架底层的面很广</li>
</ul>
</li>
<li>应用层面开发<ul>
<li>基于基础平台开发 ，写sql</li>
</ul>
</li>
</ul>
<p>根据你的兴趣点 + 公司的定位</p>
<p>必然有新的东西诞生去解决一个场景的问题</p>
<p>mr主要适用于我们的p计算（离线计算）：不要求时效性 ，但是mr开发太麻烦，就诞生了hive</p>
<p>hive 介绍 ：</p>
<p>hive.apache.org</p>
<p>是由什么人提供出来的？</p>
<p>facebook 开源 去解决结构化的数据统计问题</p>
<p>是什么？</p>
<p>构建在hadoop之上的数据仓库</p>
<p>hdfs：hive 的数据是在hdfs之上的</p>
<p>yarn：可以跑在yarn之上</p>
<p>mmapreduce ： 可以用mr形式去运行</p>
<p>如何使用：</p>
<p>定义了一中类sql的语言，类似sql但是又有不同</p>
<p>适用于离线&#x2F;p处理的</p>
<p>开发就是写sql &#x3D;》 mr  &#x3D;》 运行在yarn上</p>
<p>hive的底层引擎是：</p>
<ul>
<li>mr （默认）：sql&#x3D;》mr</li>
<li>Tez：sql&#x3D;》Tez</li>
<li>Spark：sql&#x3D;》Spark</li>
</ul>
<p>hive on spark &#x3D;》生厂上用的用的不多</p>
<p>spark on hive &#x3D;》 用sparksql查看hive的数据</p>
<p>hive的存储格式，压缩格式等</p>
<p>官网：</p>
<ul>
<li>in distributed storage （分布式存储）：hdfs , cos,oss,aws</li>
<li>A command line tool and JDBC driver are provided to connect users to Hive.</li>
</ul>
<p>版本介绍 ：</p>
<p>x.y.z：x是大版本，y是小版本，z是小版本的修复版本</p>
<p>为什么要学习hive</p>
<ul>
<li>简单易用 ： 可以用sql开发</li>
<li>扩展性好：<ul>
<li>用自定义函数udf</li>
<li>数据存储 和 计算角度 ： 如果表中数据存不下，可以加几个节点就好了<ul>
<li>注意hive不是分布式的，它仅仅是个客户端</li>
</ul>
</li>
<li>Metastore ：hive的元数据管理<ul>
<li>sparksql ,presto ,impala 只要可以访问hive的元数据就可以访问里面表的数据</li>
<li>可以分享元数据</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>hive的架构 ：</p>
<ul>
<li>元数据 ： 描述数据的数据<ul>
<li>表的名字，字段的名字，字段的类型，什么人创建的，数据存储在哪里等</li>
<li>元数据的内部内置了一个Derby但是有弊端</li>
<li>元数据都是用mysql进行存储的</li>
<li>测试的时候一个mysql就可以了</li>
<li>但是生产上则一个不够</li>
<li>生产上要遵循 HA ：高可用</li>
<li>就是要一台做备份</li>
<li>两个mysql是主从架构</li>
</ul>
</li>
</ul>
<p>hive和RDBMS的区别</p>
<ul>
<li>共同点 sql</li>
<li>延时性 ： hive 适用于离线计算 慢，千万不要拿hive和mysql的性能做对比，无可比性，mysql要必hive高（数据量小）数据量大的时候就反过来了</li>
<li>事务 ： 都支持</li>
<li>update ，delete<ul>
<li>上面两个语句在hive里基本不用，因为性能太差了</li>
</ul>
</li>
<li>都支持分布式</li>
<li>部署成本 ：<ul>
<li>hive ：廉价</li>
<li>mysql ：成本很高</li>
</ul>
</li>
<li>数据体量<ul>
<li>hive ：Tb</li>
<li>mysql：处理Pb都比较费劲</li>
</ul>
</li>
</ul>
<p>对hive进行部署</p>
<p>分布式部署 ： cwiki.apache.org(官网)</p>
<p>首先把用压缩包上传到linux机器上</p>
<p>然后对linux进行解压</p>
<p>解压完成之后，我们要对他的的配置进行修改在解压之后的</p>
<p><code>vim hive-site.xml</code></p>
<p>编辑完成之后我们把以下内容放进去</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs shell">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;<br>&lt;?xml-stylesheet type=&quot;text/xsl&quot; href=&quot;configuration.xsl&quot;?&gt;<br>&lt;configuration&gt;<br>&lt;property&gt;<br>        &lt;name&gt;javax.jdo.option.ConnectionURL&lt;/name&gt;<br>        &lt;value&gt;jdbc:mysql://bigdata2:3306/hive?createDatabaseIfNotExist=true&lt;/value&gt;<br>&lt;/property&gt;<br><br>&lt;property&gt;<br>        &lt;name&gt;javax.jdo.option.ConnectionDriverName&lt;/name&gt;<br>        &lt;value&gt;com.mysql.jdbc.Driver&lt;/value&gt;<br>&lt;/property&gt;<br>&lt;property&gt;<br>        &lt;name&gt;javax.jdo.option.ConnectionUserName&lt;/name&gt;<br>        &lt;value&gt;root&lt;/value&gt;<br>&lt;/property&gt;<br>&lt;property&gt;<br>        &lt;name&gt;javax.jdo.option.ConnectionPassword&lt;/name&gt;<br>        &lt;value&gt;liuzihan010616&lt;/value&gt;<br>&lt;/property&gt;<br>&lt;/configuration&gt;<br></code></pre></td></tr></table></figure>

<p>然后在环境变量中编辑我们的hive_home</p>
<p><code>vim ~/.bashrc </code></p>
<p>把下列加进去</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">HIVE_HOME</span><br>export HIVE_HOME=/home/hadoop/app/hive<br>export PATH=$&#123;PATH&#125;:$&#123;HIVE_HOME&#125;/bin<br></code></pre></td></tr></table></figure>

<p>然后我们要把我们的mysql链接包放在lib文件夹下</p>
<p>就是 <code>mysql-connector-java-5.1.28.jar</code></p>
<p>要放在hive的lib文件夹下</p>
<p>然后对我们的hive进行初始化</p>
<p><code>schematool -dbType mysql -initSchema</code></p>
<p>初始化成功之后，先启动hdfs ，然后命令行输入 hive 然后输入show databases;</p>
<p>成功就ok了</p>
<p>然后再mysql的数据库里会有hive这个数据库</p>
<p>mysql里\G是格式化的意思</p>
<h2 id="思考-：-表中的字段-存在哪里？"><a href="#思考-：-表中的字段-存在哪里？" class="headerlink" title="思考 ： 表中的字段 存在哪里？"></a>思考 ： 表中的字段 存在哪里？</h2><p>我们先进入hive ： <code>create table test(name String); </code></p>
<p>一个 hive 表 会被拆分成n个表存储再mysql里</p>
<p>比如　： TBl表存放的是我们的表名 <code>select * from tbls \G;</code></p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">**<span class="hljs-emphasis">* 1. row *</span>**</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><br><span class="hljs-code">            TBL_ID: 1</span><br><span class="hljs-code">       CREATE_TIME: 1669707861</span><br><span class="hljs-code">             DB_ID: 1</span><br><span class="hljs-code">  LAST_ACCESS_TIME: 0</span><br><span class="hljs-code">             OWNER: hadoop</span><br><span class="hljs-code">        OWNER_TYPE: USER</span><br><span class="hljs-code">         RETENTION: 0</span><br><span class="hljs-code">             SD_ID: 1</span><br><span class="hljs-code">          TBL_NAME: test</span><br><span class="hljs-code">          TBL_TYPE: MANAGED_TABLE</span><br><span class="hljs-code">VIEW_EXPANDED_TEXT: NULL</span><br><span class="hljs-code">VIEW_ORIGINAL_TEXT: NULL</span><br><span class="hljs-code">IS_REWRITE_ENABLED:  </span><br><span class="hljs-code">1 row in set (0.00 sec)</span><br><span class="hljs-code"></span><br></code></pre></td></tr></table></figure>

<p>比如 ： columns_v2表存放的是我们的字段 <code>select * from columns_v2 \G;</code></p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">**<span class="hljs-emphasis">* 1. row *</span>**</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><br><span class="hljs-code">      CD_ID: 1</span><br><span class="hljs-code">    COMMENT: NULL</span><br><span class="hljs-code">COLUMN_NAME: name</span><br><span class="hljs-code">  TYPE_NAME: string</span><br><span class="hljs-code">INTEGER_IDX: 0</span><br><span class="hljs-code">1 row in set (0.00 sec)</span><br><span class="hljs-code"></span><br></code></pre></td></tr></table></figure>

<p>比如 ： DBS是存放的我们的物理存储路径的 <code>select * from DBS \G;</code></p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">**<span class="hljs-emphasis">* 1. row *</span>**</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><br><span class="hljs-code">          DB_ID: 1</span><br><span class="hljs-code">           DESC: Default Hive database</span><br><span class="hljs-code">DB_LOCATION_URI: hdfs://bigdata3:9000/user/hive/warehouse</span><br><span class="hljs-code">           NAME: default</span><br><span class="hljs-code">     OWNER_NAME: public</span><br><span class="hljs-code">     OWNER_TYPE: ROLE</span><br><span class="hljs-code">      CTLG_NAME: hive</span><br><span class="hljs-code">1 row in set (0.00 sec)</span><br></code></pre></td></tr></table></figure>

<h2 id="DDL"><a href="#DDL" class="headerlink" title="DDL"></a>DDL</h2><p>hive有个默认数据库 是default 路径 ：&#x2F;user&#x2F;hive&#x2F;warehouse</p>
<p>非默认数据库 ： &#x2F;user&#x2F;hive&#x2F;warehouse&#x2F;dbname.db</p>
<h3 id="创建数据库"><a href="#创建数据库" class="headerlink" title="创建数据库"></a>创建数据库</h3><p>CREATE [REMOTE] (DATABASE|SCHEMA) [IF NOT EXISTS] database_name<br>  [COMMENT database_comment]<br>  [LOCATION hdfs_path]<br>  [MANAGEDLOCATION hdfs_path]<br>  [WITH DBPROPERTIES (property_name&#x3D;property_value, …)];</p>
<p>[] 可有可无<br>(|) 选择其中一个即可</p>
<p>CREATE DATABASE 名称；</p>
<p>CREATE DATABASE 名称 LOCATION ‘创建的地方’；</p>
<p>例子 ：</p>
<p>create database if not exists bigdata_hive;<br>create database  bigdata_hive2  LOCATION ‘&#x2F;data&#x2F;bigdata_hive2’;<br>create database  bigdata_hive3 WITH DBPROPERTIES (‘creator’&#x3D;’doublehappy’, ‘create_dt’&#x3D;”2099-11-29”);<br>create database if not exists bigdata_hive4 COMMENT “这是一个数据库4”;</p>
<p>解决此处中文乱码的问题</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> hive.dbs MODIFY <span class="hljs-keyword">COLUMN</span> `<span class="hljs-keyword">DESC</span>` <span class="hljs-type">varchar</span>(<span class="hljs-number">4000</span>) <span class="hljs-type">CHARACTER</span> <span class="hljs-keyword">SET</span> utf8 <span class="hljs-keyword">COLLATE</span> utf8_general_ci <span class="hljs-keyword">NULL</span>;<br></code></pre></td></tr></table></figure>

<h3 id="显示数据库"><a href="#显示数据库" class="headerlink" title="显示数据库"></a>显示数据库</h3><p>show databases;<br>show databases like “bigdata_hive*”<br>desc database  bigdata_hive3;<br>desc database EXTENDED bigdata_hive3;</p>
<h2 id="思考-：-这个数据库在hdfs的哪一个地方"><a href="#思考-：-这个数据库在hdfs的哪一个地方" class="headerlink" title="思考 ： 这个数据库在hdfs的哪一个地方"></a>思考 ： 这个数据库在hdfs的哪一个地方</h2><p>可以通过查看DBS表</p>
<h1 id="hive-的注释-comment-中文乱码的解决方法"><a href="#hive-的注释-comment-中文乱码的解决方法" class="headerlink" title="hive 的注释(comment) 中文乱码的解决方法"></a>hive 的注释(comment) 中文乱码的解决方法</h1><p>（1）修改表字段注解和表注解</p>
<p>alter table COLUMNS_V2 modify column COMMENT varchar(256) character set utf8;<br>alter table TABLE_PARAMS modify column PARAM_VALUE varchar(4000) character set utf8;</p>
<p>（2）修改分区字段注解</p>
<p>alter table PARTITION_PARAMS modify column PARAM_VALUE varchar(4000) character set utf8 ;<br>alter table PARTITION_KEYS modify column PKEY_COMMENT varchar(4000) character set utf8;</p>
<p>（3）修改索引注解</p>
<p>alter table INDEX_PARAMS modify column PARAM_VALUE varchar(4000) character set utf8;</p>
<p>修改hive-site.xml配置文件</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>javax.jdo.option.ConnectionURL<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>jdbc:mysql://IP:3306/db_name?createDatabaseIfNotExist=true&amp;useUnicode=true&amp;characterEncoding=UTF-8<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">description</span>&gt;</span>JDBC connect string for a JDBC metastore<span class="hljs-tag">&lt;/<span class="hljs-name">description</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>上述的 <code>&amp; 是 &amp;amp; </code></p>

      
    </div>

    
    
    

      
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://zihang.fun/2022/11/28/11-28/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="liu zihang">
      <meta itemprop="description" content="只有努力不会辜负你">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="枫叶冢">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/11/28/11-28/" class="post-title-link" itemprop="url">yarn</a>
        </h2>

        <div class="post-meta">
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-11-28 08:34:31" itemprop="dateCreated datePublished" datetime="2022-11-28T08:34:31+08:00">2022-11-28</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-12-05 12:07:08" itemprop="dateModified" datetime="2022-12-05T12:07:08+08:00">2022-12-05</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%97%A5%E5%BF%97/" itemprop="url" rel="index"><span itemprop="name">日志</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>5.4k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>5 分钟</span>
            </span>

        </div>
      </header>

    
    
    

   

    <div class="post-body" itemprop="articleBody">

      
          <h1 id="yarn"><a href="#yarn" class="headerlink" title="yarn"></a>yarn</h1><h2 id="架构"><a href="#架构" class="headerlink" title="架构"></a>架构</h2><p>主从架构 ： resourcemanager(资源的分配) : nodemanager(资源的供给与隔离)</p>
<h3 id="资源调度"><a href="#资源调度" class="headerlink" title="资源调度"></a>资源调度</h3><p>通过rm把nm的资源分配给我们的 task上</p>
<h3 id="资源隔离"><a href="#资源隔离" class="headerlink" title="资源隔离"></a>资源隔离</h3><p>nm按照要求给task提供资源，保证提供的资源具有独占性</p>
<h3 id="资源"><a href="#资源" class="headerlink" title="资源"></a>资源</h3><p>nm指挥分配的资源</p>
<p>一个task对应一个container ： cpu&#x2F;mem（cpu和内存）</p>
<p>每个container之间是相互隔离的</p>
<h2 id="yarn的架构设计"><a href="#yarn的架构设计" class="headerlink" title="yarn的架构设计"></a>yarn的架构设计</h2><p>作业提交的流程：<br>client &#x3D;&gt; 给rm 的apps 发送请求 去运行 jar （app master）</p>
<p>apps 分配一个container 去运行 app master</p>
<p>app master 会向apps manager 去注册我的作业</p>
<p>app master 向resource scheduler 申请资源去运行 我的代码</p>
<p>nodemanager 会开启资源 container 去运行map task 以及reduce task</p>
<p>tsak 会向 app master 汇报代码与运行情况</p>
<p>当代码运行完成 app master 会给apps 发送请求 ，通知我的作业完成了</p>
<p>apps manager 收到请求之后会通知你的客户端 ，告诉已经运行完成</p>
<p>输入阶段 ： map tsak 的个数 &#x3D;》container 的申请个数 redurce task 同理</p>
<h2 id="面试会问"><a href="#面试会问" class="headerlink" title="面试会问"></a>面试会问</h2><p>yarn的架构设计 &#x3D;&#x3D;mr作业提交流程</p>
<h2 id="调度器"><a href="#调度器" class="headerlink" title="调度器"></a>调度器</h2><p>FIFO ：</p>
<ul>
<li>先进先出</li>
<li>单队列</li>
</ul>
<p>Capacity ：容量调度器</p>
<ul>
<li>多队列</li>
<li>先进先出（针对一个队列）</li>
<li>每个队列之间互不影响</li>
<li>每个队列之间是事先定好的</li>
</ul>
<p>Fair：公平调度器</p>
<ul>
<li>多队列</li>
<li>每个队列之间的每个job是有影响的 不是先进先出</li>
<li>哪一个job的优先级高就执行哪一个</li>
<li>如果相同优先级，则是顺序</li>
</ul>
<p>主流的中小企业：Capacity</p>
<p>大公司会用：fair</p>
<h3 id="默认调度器"><a href="#默认调度器" class="headerlink" title="默认调度器"></a>默认调度器</h3><p>3.x：默认是容量调度器</p>
<p>通过调度器进行其作业调度</p>
<p>2.x: 版本是fair（默认）</p>
<h2 id="yarn的web界面的简介"><a href="#yarn的web界面的简介" class="headerlink" title="yarn的web界面的简介"></a>yarn的web界面的简介</h2><p>左侧侧边栏 ： 有几个选项卡 ： 分别是</p>
<h2 id="yarn资源的调优"><a href="#yarn资源的调优" class="headerlink" title="yarn资源的调优"></a>yarn资源的调优</h2><p>container?</p>
<p>一定比例的cpu和mem</p>
<p>刀片服务器的配置 ： 128G 16 core :假设一个机器的配置</p>
<p>刀片服务器 装完系统 消耗内存 1G</p>
<p>系统预留 ： 预留 20%左右 包含装完成系统 消耗的1G</p>
<p>原因 ：给未来部署组件预留空间，防止全部使用 ： 会导致系统夯住 就是卡住 ，oom机制【linux系统】：系统会自己杀死进程当内存不足的时候</p>
<p>预留空间 ： 128 * 0.2 &#x3D; 26G</p>
<p>其余空间用于大数据 102G</p>
<p>hadoop ：</p>
<ul>
<li>datanode  进程内存 ： 默认 1G &#x3D;》 生产上 2G</li>
<li>nodemanager 进程内存 ： ，默认 1G &#x3D;》 生产上 4G</li>
</ul>
<p>接下来还有96G全部给我们的yarn资源 ： 96G</p>
<p>container的资源分配 ：</p>
<p>内存</p>
<p>cpu</p>
<p>相比：cpu更重要一些</p>
<p>container的内存划分 ：默认是86G</p>
<p>其最小是 1G（默认）</p>
<p>最大是 8G（默认） 但是可以设置</p>
<p>注意 container的内存会自动增加 默认以1G递增</p>
<p>container cpu ： 是虚拟核 &#x3D;》 考虑初衷是不同节点的cpu性能不同</p>
<p>比如 ： 一个cpu是另外一个cpu的2倍</p>
<p>第一机器 ： pcore ：vcore &#x3D; 1：2 相当于1个物理核当成两个虚拟核用</p>
<p>给container的核数 ： 默认是8core</p>
<p>总数 ：</p>
<p>最小:1c  (默认)</p>
<p>最大:4c（默认）</p>
<p>实际开发角度 ：</p>
<p>mem：最大不要超过32G ，如果超过32G则会导致压缩指针失效</p>
<p>cpu ： cloudera的公司推荐一个container的core最好不要超过5</p>
<p>配置core  ：在yarn-site.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>yarn.nodemanager.resource.memory-mb<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>4096<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>yarn.scheduler.minimum-allocation-mb<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>1024<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>yarn.scheduler.maximum-allocation-mb<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>2048<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>cpu： <br><span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>yarn.nodemanager.resource.pcores-vcores-multiplier<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>2<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>yarn.nodemanager.resource.cpu-vcores<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>4<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>yarn.scheduler.minimum-allocation-vcores<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>yarn.scheduler.maximum-allocation-vcores<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>2<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br><br></code></pre></td></tr></table></figure>

<h2 id="mapreduce"><a href="#mapreduce" class="headerlink" title="mapreduce"></a>mapreduce</h2><p>map task :mem  : 默认是1024m ，一个map task 申请的资源是1024m ， 但是如果实际使用的资源的内存量超过这个值，你的task会强制被杀死 ，reduce task 也一样</p>
<p>map task :vcore ： 默认是1</p>
<p>reduce task :mem : 默认是1024m</p>
<p>reduce task :vcore : 默认是1</p>
<p>mr作业是进程级别 &#x3D;》 jvm</p>
<p>map task</p>
<p>reduce task</p>
<p>jvm参数调优 ：</p>
<p>存储 hdfs</p>
<p>存储文件</p>
<p>压缩</p>
<ul>
<li>为什么使用压缩？</li>
<li>节省空间</li>
<li>节省时间<ul>
<li>网络io核磁盘io会减少</li>
<li>指的是mapreduce数据计算过程中</li>
<li>经过网络传输的数据会变少，</li>
<li>同样到磁盘上的时候，数据量少也会减少磁盘的io</li>
</ul>
</li>
<li>使用场景<ul>
<li>采用压缩 ， 对机器的cpu要求比较高</li>
<li>存储数据的空间不够了，才会用压缩</li>
</ul>
</li>
<li>两面性</li>
<li>采用压缩的确会让空间和时间减少</li>
<li>cpu消耗 cpu利用率高 &#x3D;》会导致处理的时间变长一点</li>
<li>如何使用压缩？</li>
</ul>
<p>常见的压缩格式</p>
<ul>
<li>gzip</li>
<li>bzip2</li>
<li>Lzo</li>
<li>Snappy</li>
<li>LZ4</li>
</ul>
<p>常见的压缩注意点：</p>
<p>压缩比 Bzip2 30%  GZIP    snappy、lzo 50%  ： 这个30%和50%代表能把源文件压缩到源文件的%多少</p>
<p>解压速度 ： snappy、lzo GZIP   Bzip2</p>
<p>压缩文件可不可以一被切分</p>
<p>假设一个 5G文件 不能被切分 split 意味着 只能使用一个map task去处理</p>
<p>map task  5G</p>
<p>假设一个 5G文件 能被切片  splits 10map task 去并行处理</p>
<p>5*1024 &#x2F;10 &#x3D; 一个map task 处理的数据</p>
<p>能否被切分 决定了 你的 一个map task处理的数据量有多少</p>
<p>压缩后的文件是否支持分割？<br>            gzip  不可分割<br>            bzip2  可分割<br>            lzo   带索引的可以分割 (默认是不支持分割的)<br>            snappy 不可分割的</p>
<p>mapreduce 每个阶段该如何采用这些算法？</p>
<p>input &#x3D;》 maps &#x3D;》 reduce &#x3D;》 output</p>
<p>input：<br>    1.Bzip2 ：支持分割 多个map task 进行出</p>
<p>map out：</p>
<ul>
<li>snappy 、lzo</li>
<li>shuffle 过程 要选择一个解压 速度快的压缩格式</li>
</ul>
<p>reduce out ：</p>
<ul>
<li>1.高的压缩比 + 支持分片  &#x3D;》 节省空间</li>
<li>2.bzip2  、lzo带索引的</li>
</ul>
<p>reduce out 数据 作为下一个<br>map 的输入咋办？<br>建议使用bzip2【如果采用压缩的话】</p>
<p>进行压缩配置的两种方式 ：</p>
<p>job &#x3D;》 code 针对少数job生产生效</p>
<p>集群所有的job 在配置文件里配置</p>
<p>对mapreduce 进行配置</p>
<ul>
<li>配置压缩的codec</li>
<li>map reduce 输出配置<ul>
<li>先打开压缩的开关</li>
<li>配置codec即可</li>
</ul>
</li>
<li>hadoop是不是支持哪些压缩 ，通过命令 ：或者配置文件</li>
<li>core-site.xml<ul>
<li>配置支持的压缩有什么</li>
<li>原生的hadoop默认不支持lzo的算法，因为lzo要把整个hadooop重新编译一遍才可以重新实行</li>
<li>&#96;&#96;&#96;<property>
        <name>io.compression.codecs</name>
        <value>org.apache.hadoop.io.compress.BZip2Codec,
        org.apache.hadoop.io.compress.SnappyCodec,
        org.apache.hadoop.io.compress.GzipCodec,
        org.apache.hadoop.io.compress.DefaultCodec
    </value>
</property>
<figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs xquery"><br>mapred-site.xml:<br><br>* <span class="hljs-number">1</span>.先打开压缩的开关<br>* <span class="hljs-number">2</span>.<span class="hljs-keyword">map</span> reduce 输出 压缩算法<br><br>reduce： 开关<br><br>* mapreduce.output.fileoutputformat.compress<br>* ```<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span></span><br><span class="language-xml">          </span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>mapreduce.output.fileoutputformat.compress<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span></span><span class="language-xml"></span><br><span class="language-xml">          </span><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span></span><span class="language-xml"></span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span></span><br></code></pre></td></tr></table></figure></li>
</ul>
</li>
<li>&#96;&#96;&#96;<property>
        <name>mapreduce.output.fileoutputformat.compress.codec</name>
        <value>org.apache.hadoop.io.compress.BZip2Codec</value>
</property>
<figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs arcade"><br><span class="hljs-built_in">map</span>阶段的：<br><br></code></pre></td></tr></table></figure>
// 设置在map输出阶段压缩
      conf.set("mapreduce.map.output.compress", "true");</li>
</ul>
<p>&#x2F;&#x2F; 设置解压缩编码器<br>        conf.set(“mapreduce.map.output.compress.codec”, “org.apache.hadoop.io.compress.DefaultCodec”);</p>
<figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs gams"><br>各个datanode数据节点的平衡<br><br><span class="hljs-comment">* DN1 存储空间 90%</span><br><span class="hljs-comment">* DN2 存储空间 60%</span><br><span class="hljs-comment">* DN3 存储空间 80%</span><br><br>如何做呢？<br><br><span class="hljs-comment">* sbin/start-balancer.sh</span><br><br><span class="hljs-keyword">parameters</span> = Balancer.BalancerParameters<br><br>[BalancingPolicy.Node, threshold <span class="hljs-comment">= 10.0, max idle iteration = 5</span><br><br>数据平衡的默认阈值：threshold <span class="hljs-comment">= 10.0</span><br><br>每个节点的磁盘使用率 - 平均的磁盘使用率 &lt;10%<br><br>DN1 存储空间 <span class="hljs-comment">90%  -76% = 14%</span> 说明这个节点数据多 往别的节点迁移数据 出<br>DN2 存储空间 <span class="hljs-comment">60%  -76% = -12%</span> 说明这个节点数据少 别的节点迁移数据 进<br>DN3 存储空间 <span class="hljs-comment">80%  -76% = 4%</span> 	说明这个节点数据多 往别的节点迁移数据<br><br>avg=90 + 80 +60 /<span class="hljs-number">3</span> = <span class="hljs-number">76</span>%<br><br>生产上 从现在开始 start-balancer.sh -threshold <span class="hljs-number">10</span>  每天要定时做的<br><br>放到业务低谷期去做 数据平衡操作<br><br>注意： 不要在业务高峰期做<br><br><span class="hljs-number">1.</span>数据平衡 数据传输  带宽有关<br><br>调优参数 ：平衡的网络带宽  w<br><br>dfs.datanode.balance.bandwidthPerSec <span class="hljs-number">100</span>m 【<span class="hljs-number">2.</span>x 默认是<span class="hljs-number">10</span>m】<br><br>每个节点数据几十T  需要数据平衡的数据 几十T  可以申请维护窗口时间 ：<br><br>dfs.datanode.balance.bandwidthPerSec 临时调大 <span class="hljs-number">200</span>M<br><br>单个DN节点 多块磁盘的数据平衡<br><br>投产前规划：<br>		DN 机器   <span class="hljs-number">10</span>块 <span class="hljs-number">2</span>T 【不做raid】  =》 <span class="hljs-number">20</span>T   副本的<br><br><span class="hljs-number">1.</span>dn 配置多个磁盘<br><br></code></pre></td></tr></table></figure>
<property>
        <name>dfs.datanode.data.dir</name>
        <value>/data01,/data02,/data03</value>
</property>
```

<p>挂载磁盘一般最省钱的是 2W 转数 2T的</p>
<p>2.为什么要使用多块物理磁盘？</p>
<p>1.存储<br>2.因为多个磁盘的io也是叠加的<br>每块磁盘 磁盘io 每秒 100m<br>三块磁盘 1s 能 300m文件内容<br>一块磁盘 1s 100m</p>
<p>3.可以让服务一直运行，加入一个磁盘挂了，服务不会减少</p>
<p>做多个磁盘数据均衡<br>    dfs.disk.balancer.enabled  true 【3.x有这个功能 cdh 2.x 也有】 apache 2.x 没有这个功能</p>
<p>得通过命令去解决磁盘数据均衡？</p>
<p>hdfs diskbalancer</p>
<p>1.步骤</p>
<pre><code>hdfs diskbalancer -plan  bigdata32  =&gt; 生成一个  bigdata32.plan.json 文件
    hdfs diskbalancer -execute bigdata32.plan.json =》 执行disk 数据均衡计划文件
    hdfs diskbalancer -query bigdata32
</code></pre>
<p>生产上 当你发现 磁盘写入不均衡 可以做一下 【一般 一个月 半个月 做一次即可】</p>

      
    </div>

    
    
    

      
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://zihang.fun/2022/11/24/11-24/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="liu zihang">
      <meta itemprop="description" content="只有努力不会辜负你">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="枫叶冢">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/11/24/11-24/" class="post-title-link" itemprop="url">mapreduce</a>
        </h2>

        <div class="post-meta">
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2022-11-24 08:22:22 / 修改时间：21:21:51" itemprop="dateCreated datePublished" datetime="2022-11-24T08:22:22+08:00">2022-11-24</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%9D%82%E8%B4%A7%E6%8A%80%E6%9C%AF%E6%A0%88/" itemprop="url" rel="index"><span itemprop="name">杂货技术栈</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>2.5k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>2 分钟</span>
            </span>

        </div>
      </header>

    
    
    

   

    <div class="post-body" itemprop="articleBody">

      
          <h1 id="typeScript"><a href="#typeScript" class="headerlink" title="typeScript"></a>typeScript</h1><h2 id="简介："><a href="#简介：" class="headerlink" title="简介："></a>简介：</h2><p>ts：typescript ： 简单来说就是js的超集，可以向下兼容js，所以我们使用ts不用对js进行更改，ts会自动转换成js</p>
<p>因为现在的浏览器不支持ts的语法 ： ts的编译环境是node.js</p>
<p>安装运行 ： npm install -g typescript</p>
<p>安装之后用tsv -v 查看</p>
<p>与逆行的时候下载一个json</p>
<p>命令行 : tsc -init</p>
<p>然后运行命令 ： ts-node .&#x2F;文件名</p>
<p>下面是关于ts的简单介绍</p>
<p>首先ts是静态类型，js是动态类型</p>
<h3 id="类型"><a href="#类型" class="headerlink" title="类型"></a>类型</h3><p>静态类型是编译阶段就会发现问题，而动态类型则是直到运行阶段才会问问题的</p>
<p>所以相比较而言，静态类型，比动态类型更加可控</p>
<h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><p>ts的类型 ：</p>
<p>包括 : 布尔 ， 数值，字符串， null , symbol , BigInt,undefined</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">let</span> isDone :<span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span><br><span class="hljs-keyword">let</span> <span class="hljs-attr">s</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">6</span>;<br><span class="hljs-keyword">let</span> <span class="hljs-attr">a</span>: <span class="hljs-built_in">number</span> = <span class="hljs-title class_">NaN</span>;<br><span class="hljs-keyword">let</span> <span class="hljs-attr">b</span>: <span class="hljs-built_in">number</span> = <span class="hljs-title class_">Infinity</span>;<br><span class="hljs-keyword">let</span> <span class="hljs-attr">my</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">&#x27;yon&#x27;</span><br><span class="hljs-keyword">let</span> o : <span class="hljs-literal">undefined</span><br><span class="hljs-keyword">let</span> <span class="hljs-attr">nme</span>: <span class="hljs-literal">null</span>;<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">alertName</span>(<span class="hljs-params"></span>) : <span class="hljs-built_in">void</span> &#123;<br>    <span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;my first name&#x27;</span>)<br>&#125;<br><span class="hljs-keyword">let</span> <span class="hljs-attr">arr</span>: <span class="hljs-built_in">any</span>[] = [<span class="hljs-string">&quot;hello&quot;</span> , <span class="hljs-number">1</span> , <span class="hljs-literal">true</span>]<br><span class="hljs-keyword">let</span> <span class="hljs-attr">ids</span>:<span class="hljs-built_in">number</span>[] = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>];<br><span class="hljs-keyword">let</span> <span class="hljs-attr">names</span>: <span class="hljs-title class_">String</span>[] = [<span class="hljs-string">&quot;xxx&quot;</span> , <span class="hljs-string">&quot;yyy&quot;</span> , <span class="hljs-string">&quot;zzzz&quot;</span>];<br><span class="hljs-keyword">let</span> <span class="hljs-attr">book</span>: <span class="hljs-title class_">Object</span>[] = [&#123;<span class="hljs-attr">name1</span>:<span class="hljs-string">&#x27;tom&#x27;</span> , <span class="hljs-attr">animal</span>:<span class="hljs-string">&#x27;cont&#x27;</span>&#125;,&#123;<span class="hljs-attr">name1</span>:<span class="hljs-string">&#x27;gggg&#x27;</span>,<span class="hljs-attr">animal</span>:<span class="hljs-string">&#x27;hhhh&#x27;</span>&#125;];<br>ids.<span class="hljs-title function_">push</span>(<span class="hljs-number">6</span>);<br><span class="hljs-keyword">let</span> <span class="hljs-attr">person</span>:(<span class="hljs-built_in">string</span>|<span class="hljs-built_in">number</span>|<span class="hljs-built_in">boolean</span>)[]=[<span class="hljs-string">&#x27;aslkdjla&#x27;</span>,<span class="hljs-number">1</span>,<span class="hljs-literal">true</span>]; <span class="hljs-comment">// 这个是三个值</span><br><span class="hljs-keyword">let</span> <span class="hljs-attr">person1</span>:[<span class="hljs-built_in">string</span>,<span class="hljs-built_in">number</span>,<span class="hljs-built_in">boolean</span>]=[<span class="hljs-string">&#x27;sdfjkl&#x27;</span>,<span class="hljs-number">1</span>,<span class="hljs-literal">true</span>]; <span class="hljs-comment">// 这个是一个值</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(isDone)<span class="hljs-keyword">let</span> isDone :<span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span><br><span class="hljs-keyword">let</span> <span class="hljs-attr">s</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">6</span>;<br><span class="hljs-keyword">let</span> <span class="hljs-attr">a</span>: <span class="hljs-built_in">number</span> = <span class="hljs-title class_">NaN</span>;<br><span class="hljs-keyword">let</span> <span class="hljs-attr">b</span>: <span class="hljs-built_in">number</span> = <span class="hljs-title class_">Infinity</span>;<br><span class="hljs-keyword">let</span> <span class="hljs-attr">my</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">&#x27;yon&#x27;</span><br><span class="hljs-keyword">let</span> o : <span class="hljs-literal">undefined</span><br><span class="hljs-keyword">let</span> <span class="hljs-attr">nme</span>: <span class="hljs-literal">null</span>;<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">alertName</span>(<span class="hljs-params"></span>) : <span class="hljs-built_in">void</span> &#123;<br>    <span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;my first name&#x27;</span>)<br>&#125;<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(isDone)<br></code></pre></td></tr></table></figure>

<h2 id="接口"><a href="#接口" class="headerlink" title="接口"></a>接口</h2><p>我们定义接口的方式如下：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">interface</span> a&#123;<br>    <span class="hljs-attr">name</span>:<span class="hljs-built_in">string</span>;<br>    <span class="hljs-attr">age</span>:<span class="hljs-built_in">number</span>;<br>    <span class="hljs-attr">isP</span>:<span class="hljs-built_in">boolean</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>和上述数组的作用一样，不过这样定义可以增强复用性，随便让一个东西继承一下他，就可以了</p>
<p>比如：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">interface</span> a&#123;<br>    <span class="hljs-attr">name</span>:<span class="hljs-built_in">string</span>;<br>    <span class="hljs-attr">age</span>:<span class="hljs-built_in">number</span>;<br>    <span class="hljs-attr">isP</span>:<span class="hljs-built_in">boolean</span>;<br>&#125;<br><br><span class="hljs-keyword">let</span> <span class="hljs-attr">p</span>:a=&#123;<br>    <span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;kjds&#x27;</span>,<br>    <span class="hljs-attr">age</span>:<span class="hljs-number">11</span>,<br>    <span class="hljs-attr">isP</span>:<span class="hljs-literal">false</span><br>&#125;<br></code></pre></td></tr></table></figure>

<h2 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h2><p>函数合上述的接口很像，他是在接口创建了几个方法，如下</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">interface</span> s&#123;<br>    <span class="hljs-attr">name</span>:<span class="hljs-built_in">string</span>;<br>    <span class="hljs-title function_">eat</span>(<span class="hljs-attr">name</span>:<span class="hljs-built_in">string</span>):<span class="hljs-built_in">string</span>;<br>&#125;<br><br><span class="hljs-keyword">let</span> <span class="hljs-attr">j</span>:s=&#123;<br>    <span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;lkasdj&#x27;</span>,<br>    <span class="hljs-attr">eat</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params">name:<span class="hljs-built_in">string</span></span>)&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;eat$&#123;name&#125;&#x27;</span><br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">add</span> = (<span class="hljs-params">a:<span class="hljs-built_in">number</span>,b:<span class="hljs-built_in">number</span>,c?:<span class="hljs-built_in">number</span>|<span class="hljs-built_in">string</span></span>)=&gt;&#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(c)<br>    <span class="hljs-keyword">return</span> a+b<br>&#125;<br></code></pre></td></tr></table></figure>

<p>问号代表从后面的类型里选数据，这里是number和string</p>
<p>上面的是lambad多</p>
<p>把ts转换成js的语法是any</p>
<h2 id="Dom和类型转换"><a href="#Dom和类型转换" class="headerlink" title="Dom和类型转换"></a>Dom和类型转换</h2><p>ts无法像js一样进行访问dom这个就意味着ts无法确定这些dom是不是存在，所以使用非空断言，我们可用明确的告诉他，这个表达式是null&#x2F;undefined</p>
<p>非空断言 X! 代表把x中的null和undefined给去除了</p>
<p>例如 ：下面是关于ts和获取dom的</p>
<p><code>const link = document.querySelector(&#39;a&#39;);</code></p>
<p>当我们要通过class来选择一个dom元素的时候，可以进行一层转化</p>
<p>例如 ： <code>const from = document.getElementById(&#39;form&#39;) as HTMLAnchorElement</code></p>
<h2 id="类"><a href="#类" class="headerlink" title="类"></a>类</h2><p>和java中的类异常类似</p>
<p>比如 ： </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Preson</span> &#123; <br>    <span class="hljs-attr">name</span>:<span class="hljs-built_in">string</span>;<br>    <span class="hljs-attr">iscool</span>:<span class="hljs-built_in">boolean</span>;<br>    <span class="hljs-attr">age</span>:<span class="hljs-built_in">number</span>;<br>    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">n:<span class="hljs-built_in">string</span>,c:<span class="hljs-built_in">boolean</span>,a:<span class="hljs-built_in">number</span></span>)&#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>=n<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">iscool</span>=c<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span>=a<br>    &#125;<br>&#125;<br><span class="hljs-title function_">sayhai</span>(<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;hi,wosshi$&#123;this.name&#125;,jinnnan$&#123;this.age&#125;&#x27;</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p>类的修饰符</p>
<p>readonly,privatee,protected,public</p>
<p>简单的介绍就到这里为止，具体以后再慢慢补充</p>

      
    </div>

    
    
    

      
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://zihang.fun/2022/11/21/11-21/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="liu zihang">
      <meta itemprop="description" content="只有努力不会辜负你">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="枫叶冢">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/11/21/11-21/" class="post-title-link" itemprop="url">mapreduce</a>
        </h2>

        <div class="post-meta">
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2022-11-21 08:47:09 / 修改时间：20:46:23" itemprop="dateCreated datePublished" datetime="2022-11-21T08:47:09+08:00">2022-11-21</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%97%A5%E5%BF%97/" itemprop="url" rel="index"><span itemprop="name">日志</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>4.7k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>4 分钟</span>
            </span>

        </div>
      </header>

    
    
    

   

    <div class="post-body" itemprop="articleBody">

      
          <h1 id="续讲Hadoop"><a href="#续讲Hadoop" class="headerlink" title="续讲Hadoop"></a>续讲Hadoop</h1><h2 id="模板模式"><a href="#模板模式" class="headerlink" title="模板模式"></a>模板模式</h2><p>关于mapreduce的操作模式就是模板模式，加上自定义的变量</p>
<h3 id="模板模式-1"><a href="#模板模式-1" class="headerlink" title="模板模式"></a>模板模式</h3><p>关于模板模式，就是三步走</p>
<p>开始阶段 ： map阶段</p>
<p>处理阶段 ： reduce阶段</p>
<p>结束阶段 ： 关闭流并输出</p>
<h3 id="自定义的变量"><a href="#自定义的变量" class="headerlink" title="自定义的变量"></a>自定义的变量</h3><p>BooleanWriteable : 布尔类型</p>
<p>ByteWriteable : Byte类型</p>
<p>DoubleWriteable : double类型</p>
<p>FloatWriteable ：float类型</p>
<p>intWriteable ： int类型</p>
<p>…（等等）</p>
<h3 id="mapreduce的核心方法"><a href="#mapreduce的核心方法" class="headerlink" title="mapreduce的核心方法"></a>mapreduce的核心方法</h3><ul>
<li>input : InputFormat &#x3D;&gt; 如何加载数据</li>
<li>查看源码发现有DBInputFormat 和 FileInputFormat，代表我们可以从db（数据库中），或者文件中加载数据（上述两个是抽象类，我们实例化的时候其实是实例化其子类）</li>
<li>简单来说就是读取数据的方法</li>
<li>默认实例化的时候是实例化 TextInputFormat</li>
<li>关于TextInputFormat ： 其有两个参数<ul>
<li>key 和 value<ul>
<li>key 是 读取文件的位置</li>
<li>value 是 一行一行的内容<ul>
<li>在value中有个属性 判断文件可不可以被切分 ： isSpiltable<ul>
<li>map task 数据 是由 input 的切片数量决定的 ， 当不可被切片的时候对应的数量就是1，对应一个map task</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>creatRecordReader</p>
<h2 id="一个文件加载的时候会被切分成几个切片"><a href="#一个文件加载的时候会被切分成几个切片" class="headerlink" title="一个文件加载的时候会被切分成几个切片"></a>一个文件加载的时候会被切分成几个切片</h2><p>前提 ： 文件可以被切分</p>
<p>当一个文件 在hdfs上的时候是按我们的大小进行切分的 以128m为基础单位</p>
<p>而我们的map的切片是按照blocksize进行切分的简单来说就是以blocksize的大小进行切分</p>
<p>总结  ：</p>
<ul>
<li>文件大小小于128m<ul>
<li>那么切分成1片</li>
</ul>
</li>
<li>如果文件大于128m<ul>
<li>filesize&#x2F;splitesize &#x3D; num 切片数</li>
<li>filesize剩余的部分 ： 和splitesize的10%比较<ul>
<li>如果大，则开启一个切片文件</li>
<li>如果小，则是和上面最后一个合并到一起</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>不能被切分的文件： 某些被压缩文件</p>
<ul>
<li>关于这个切片大小的标准 ：<ul>
<li>在hdfs上是128m</li>
<li>但是在idea上是32m（在源码里能看）</li>
</ul>
</li>
</ul>
<h2 id="redurce-task-个数是由上面决定"><a href="#redurce-task-个数是由上面决定" class="headerlink" title="redurce task 个数是由上面决定?"></a>redurce task 个数是由上面决定?</h2><p>默认是 1</p>
<p>如果要更改要手动更改</p>
<p>setNumReduceTasks(数量)</p>
<p>如果 reduce阶段数量变多</p>
<p>则会把相同的文件拉到一起，就是按照一个规则进行的分区</p>
<p>默认是走的hashcode ： 这个按照规则来分的就是分区</p>
<p>一般来说 ： 分区的结果是 suffler 的输出结果是 reduce的输入</p>
<h3 id="简单需求"><a href="#简单需求" class="headerlink" title="简单需求"></a>简单需求</h3><p>基于phone的存储数据 ，进行分文件存储</p>
<p>比如</p>
<p>13开头的存储在一个上</p>
<p>15开头的在一个文件上</p>
<p>这就要自定义分区</p>
<p>通过继承Partitioner类实现方法然后导入方法</p>
<p>实现getPartition方法进行分区 ： 以下是一个简单的分区函数</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> org.example;<br><br><span class="hljs-keyword">import</span> org.apache.hadoop.io.IntWritable;<br><span class="hljs-keyword">import</span> org.apache.hadoop.io.Text;<br><span class="hljs-keyword">import</span> org.apache.hadoop.mapreduce.Partitioner;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">myPartionit</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Partitioner</span>&lt;Text , IntWritable&gt; &#123;<br><br><br><br>    <span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getPartition</span><span class="hljs-params">(Text text, IntWritable intWritable, <span class="hljs-type">int</span> i)</span> &#123;<br>        <span class="hljs-keyword">if</span> (text.toString().equals(<span class="hljs-string">&quot;ANALYST&quot;</span>))&#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (text.toString().equals(<span class="hljs-string">&quot;CLERK&quot;</span>))&#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>&#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (text.toString().equals(<span class="hljs-string">&quot;MANAGER&quot;</span>))&#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">2</span>;<br>&#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (text.toString().equals(<span class="hljs-string">&quot;PRESIDENT&quot;</span>))&#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">3</span>;<br>&#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (text.toString().equals(<span class="hljs-string">&quot;SALESMAN&quot;</span>))&#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">4</span>;<br>&#125;<span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">5</span>;<br>&#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>然后我们要在我们的主程序中调用这个类 ， test类：就是我们的主类，如下</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> org.example;<br><br><br><span class="hljs-keyword">import</span> org.apache.hadoop.conf.Configuration;<br><span class="hljs-keyword">import</span> org.apache.hadoop.fs.Path;<br><span class="hljs-keyword">import</span> org.apache.hadoop.io.IntWritable;<br><span class="hljs-keyword">import</span> org.apache.hadoop.io.Text;<br><span class="hljs-keyword">import</span> org.apache.hadoop.mapreduce.Job;<br><span class="hljs-keyword">import</span> org.apache.hadoop.mapreduce.Mapper;<br><span class="hljs-keyword">import</span> org.apache.hadoop.mapreduce.Reducer;<br><span class="hljs-keyword">import</span> org.apache.hadoop.mapreduce.lib.input.FileInputFormat;<br><span class="hljs-keyword">import</span> org.apache.hadoop.mapreduce.lib.output.FileOutputFormat;<br><br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.util.StringTokenizer;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> sxwang</span><br><span class="hljs-comment"> * 11 18 14:00</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">test</span> &#123;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * driver</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> args</span><br><span class="hljs-comment">*/</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br><br>        <span class="hljs-keyword">if</span> (args.length &lt; <span class="hljs-number">2</span>)&#123;<br>            System.out.println(<span class="hljs-string">&quot;出现问题最少两个参数&quot;</span>);<br>System.exit(<span class="hljs-number">2</span>);<br>&#125;<br>        String input=args[<span class="hljs-number">0</span>];<br>String output=args[<span class="hljs-number">1</span>];<br><span class="hljs-type">Configuration</span> <span class="hljs-variable">conf</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Configuration</span>();<br><span class="hljs-comment">//0.todo... 删除目标路径</span><br>FileUtils.deletePath(conf,output);<br><br><span class="hljs-comment">//1.设置 作业名称</span><br><span class="hljs-type">Job</span> <span class="hljs-variable">job</span> <span class="hljs-operator">=</span> Job.getInstance(conf, <span class="hljs-string">&quot;WCAPP&quot;</span>);<br><span class="hljs-comment">//2.设置map reduce 执行代码的主类</span><br>job.setJarByClass(test.class);<br>job.setMapperClass(MyMapper.class);<br>job.setReducerClass(MyReducer.class);<br><span class="hljs-comment">//3.指定 oupput kv类型</span><br>job.setOutputKeyClass(Text.class);<br>job.setOutputValueClass(IntWritable.class);<br>job.setNumReduceTasks(<span class="hljs-number">6</span>);<br>job.setPartitionerClass(myPartionit.class);<br><span class="hljs-comment">//4. 设置数据源路径 数据输出路径</span><br>FileInputFormat.addInputPath(job, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Path</span>(input));<br>FileOutputFormat.setOutputPath(job, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Path</span>(output));<br><span class="hljs-comment">//5. 提交mr yarn</span><br>System.exit(job.waitForCompletion(<span class="hljs-literal">true</span>) ? <span class="hljs-number">0</span> : <span class="hljs-number">1</span>);<br>&#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * mapper</span><br><span class="hljs-comment">     */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyMapper</span><br>            <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Mapper</span>&lt;Object, Text, Text, IntWritable&gt; &#123;<br><br>        <span class="hljs-meta">@Override</span><br><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">map</span><span class="hljs-params">(Object key, Text value, Context context)</span> <span class="hljs-keyword">throws</span> IOException, InterruptedException &#123;<br>            <span class="hljs-comment">/**</span><br><span class="hljs-comment">             * 1.按照分隔符 进行拆分 每个单词 ，每个单词赋值为1</span><br><span class="hljs-comment">             * (word ,1)</span><br><span class="hljs-comment">             */</span><br><br>String[] words = value.toString().split(<span class="hljs-string">&quot;\n&quot;</span>);<br><br>            <span class="hljs-keyword">for</span> (String word : words) &#123;<br>                String[] split = word.split(<span class="hljs-string">&quot;,&quot;</span>);<br>context.write(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Text</span>(split[<span class="hljs-number">2</span>]) ,<span class="hljs-keyword">new</span> <span class="hljs-title class_">IntWritable</span>(<span class="hljs-number">1</span>));<br>&#125;<br><br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * reducer</span><br><span class="hljs-comment">     */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyReducer</span><br>            <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Reducer</span>&lt;Text,IntWritable,Text,IntWritable&gt; &#123;<br><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         *  (word ,1)</span><br><span class="hljs-comment">         *</span><br><span class="hljs-comment">         *  (word,&lt;1,1,1,1&gt;)</span><br><span class="hljs-comment">         *</span><br><span class="hljs-comment">         *  1.聚合value</span><br><span class="hljs-comment">         *</span><br><span class="hljs-comment">         *  2.写出去</span><br><span class="hljs-comment">*  (word ,3)</span><br><span class="hljs-comment">         */</span><br><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">reduce</span><span class="hljs-params">(Text key, Iterable&lt;IntWritable&gt; values, Context context)</span> <span class="hljs-keyword">throws</span> IOException, InterruptedException &#123;<br>            <span class="hljs-type">int</span> sum=<span class="hljs-number">0</span>;<br>            <span class="hljs-keyword">for</span> (IntWritable value : values) &#123;<br>                sum +=Integer.parseInt(value.toString());<br>&#125;<br>            context.write(key,<span class="hljs-keyword">new</span> <span class="hljs-title class_">IntWritable</span>(sum));<br>&#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h2 id="sql-vs-mr-mapreduce"><a href="#sql-vs-mr-mapreduce" class="headerlink" title="sql vs mr(mapreduce)"></a>sql vs mr(mapreduce)</h2><ul>
<li>sql  :<ul>
<li>group by</li>
<li>distinct</li>
<li>join</li>
<li>order by</li>
<li>union<ul>
<li><p>group by 用mr实现</p>
</li>
<li><p>就是再map阶段进行处理reduce阶段进行合并</p>
</li>
<li><p>distinct</p>
</li>
<li></li>
<li><p>去重 ： sql ：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-keyword">distinct</span>(ename) <span class="hljs-keyword">from</span> emp;<br>#或者可以通过分组进行去重<br><span class="hljs-keyword">select</span> name <span class="hljs-keyword">from</span> <span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> name;<br></code></pre></td></tr></table></figure></li>
<li><p>通过上述我们可知group by 也可以进行去重 ，所以后面我们能用group by 就要用group by</p>
</li>
<li><p>因为distinct只有一个task进行处理</p>
</li>
<li><p>而group by 则是多个task 进行处理 ， 所以效率会比较高</p>
</li>
<li><p>接下来是在mr里实现</p>
</li>
<li><p>order by</p>
</li>
<li><p>mr :</p>
</li>
<li><p>全局排序 ： reduce task 是 1</p>
</li>
<li><p>分区排序 ： reduce task 是 多个</p>
</li>
<li><p>mr : 实现</p>
</li>
<li></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="坑"><a href="#坑" class="headerlink" title="坑"></a>坑</h2><p>如果你的reduce task 大于分区数 ： 会有空白文件</p>
<p>如果 reduce task 小于分区数 且大于1 ： 则会报错</p>
<p>如果 reduce task 且分区数 等于 1 ： 则会把东西整合到一个文件</p>
<h2 id="关于mapreduce在linux上运行的学习，官方提供了源码库"><a href="#关于mapreduce在linux上运行的学习，官方提供了源码库" class="headerlink" title="关于mapreduce在linux上运行的学习，官方提供了源码库"></a>关于mapreduce在linux上运行的学习，官方提供了源码库</h2><p>地址在github上：</p>

      
    </div>

    
    
    

      
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://zihang.fun/2022/11/19/jar%E5%88%B0exe/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="liu zihang">
      <meta itemprop="description" content="只有努力不会辜负你">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="枫叶冢">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/11/19/jar%E5%88%B0exe/" class="post-title-link" itemprop="url">把jar包打包成exe</a>
        </h2>

        <div class="post-meta">
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2022-11-19 11:40:21 / 修改时间：12:22:44" itemprop="dateCreated datePublished" datetime="2022-11-19T11:40:21+08:00">2022-11-19</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%9D%82%E8%B4%A7%E6%8A%80%E6%9C%AF%E6%A0%88/" itemprop="url" rel="index"><span itemprop="name">杂货技术栈</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>768</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    

   

    <div class="post-body" itemprop="articleBody">

      
          <h1 id="使用工具"><a href="#使用工具" class="headerlink" title="使用工具"></a>使用工具</h1><ul>
<li>我们所使用的工具是exe4j 和 inno setup</li>
</ul>
<h2 id="exe4j"><a href="#exe4j" class="headerlink" title="exe4j"></a>exe4j</h2><ul>
<li>简单来说这个就是个工具，可以把java的jar包打包成exe的</li>
<li>可以让其他由java运行环境的机器运行这个jar</li>
<li>而且还可以稍微做到保密的程度</li>
<li>exe4j 是一个帮助你集成 Java 应用程序到 Windows 操作环境的 java 可执行文件生成工具，无论这些应用是用于服务器，还是图形用户界面（GUI）或命令行的应用程序。如果你想在任务管理器中及 Windows XP 分组的用户友好任务栏里以你的进程名取代 java.exe 的出现，那么 exe4j 可以完成这个工作。exe4j 帮助你以一种安全的方式启动你的 java 应用程序，来显示本地启动画面，检测及发布合适的 JRE 和 JDK，以及进行启动时所发生的错误处理等，以至于更多。</li>
<li>关于exe4j的破解我就不多赘述了，懂的都懂</li>
<li>接下来是实际操作</li>
<li>下面是开始界面</li>
<li><img src="https://pic.imgdb.cn/item/6378540416f2c2beb192c11f.jpg" alt="开始界面"></li>
<li>然后接下来</li>
<li>选择jar到exe的模式</li>
<li><img src="https://pic.imgdb.cn/item/6378546916f2c2beb1932dfa.jpg"></li>
<li>然后接下来要选择你的输出路径</li>
<li><img src="https://pic.imgdb.cn/item/637854cd16f2c2beb193c56c.jpg"></li>
<li>接下来选择我们的启动方式，我选择的是控制台启动</li>
<li><img src="https://pic.imgdb.cn/item/6378550616f2c2beb1942a62.jpg"></li>
<li>接下来选择可以在32位和64位机器上都可以运行</li>
<li><img src="https://pic.imgdb.cn/item/6378553316f2c2beb194a3be.jpg"></li>
<li><img src="https://pic.imgdb.cn/item/6378556516f2c2beb1952fa9.jpg"></li>
<li>接下来选择我们exe要执行的主类</li>
<li>我这个项目是boot项目，所以选择的是这个</li>
<li><img src="https://pic.imgdb.cn/item/6378558416f2c2beb195719f.jpg"></li>
<li>然后设置我们的jdk版本</li>
<li><img src="https://pic.imgdb.cn/item/637855bd16f2c2beb195f1d6.jpg"></li>
<li><img src="https://pic.imgdb.cn/item/637855dc16f2c2beb1962843.jpg"></li>
<li>最后一直点击next就好了</li>
<li><img src="https://pic.imgdb.cn/item/6378564016f2c2beb196ce41.jpg"></li>
<li>这样我们就打包完成了</li>
<li>但是这样的打包只能再有jdk的环境中运行</li>
<li>接下来我们要为这个添加依赖</li>
</ul>
<h2 id="inno-setup"><a href="#inno-setup" class="headerlink" title="inno setup"></a>inno setup</h2><ul>
<li>简单来说就是个绑定依赖的程序</li>
<li>打开</li>
<li><img src="https://pic.imgdb.cn/item/6378572316f2c2beb198e2a2.jpg"></li>
<li><img src="https://pic.imgdb.cn/item/6378577616f2c2beb199aecb.jpg"></li>
<li><img src="https://pic.imgdb.cn/item/6378579d16f2c2beb19a1b5f.jpg"></li>
<li>然后配置我们的名称和版本号</li>
<li>然后选择我们，刚刚弄个出来的exe程序</li>
<li><img src="https://pic.imgdb.cn/item/637858cd16f2c2beb19b780b.jpg"></li>
<li>然后就一直傻瓜式next</li>
<li><img src="https://pic.imgdb.cn/item/6378593316f2c2beb19be141.jpg"></li>
<li>设置输出文件夹</li>
<li>图标</li>
<li>以及运行时的密码</li>
<li>然后一直next就好</li>
<li>然后会跳出两个对话框</li>
<li>全部选择是</li>
<li>最后会出现这个东西</li>
<li><img src="https://pic.imgdb.cn/item/637859e916f2c2beb19d21f9.jpg"></li>
<li>就代表导入依赖了</li>
<li>接下来我们要对他进行修改</li>
<li><img src="https://pic.imgdb.cn/item/63785a3d16f2c2beb19d8050.jpg"></li>
<li>这个是自己电脑本机的jdk路径</li>
<li>然后还有要在这里加上MYjrename</li>
<li><img src="https://pic.imgdb.cn/item/63785a8116f2c2beb19dd2fa.jpg"></li>
<li>最后运行就成功了</li>
<li>他会给你成一个setup文件，通过这个文件安装的exe</li>
<li>就会自己带环境了</li>
<li></li>
</ul>

      
    </div>

    
    
    

      
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://zihang.fun/2022/11/19/%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="liu zihang">
      <meta itemprop="description" content="只有努力不会辜负你">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="枫叶冢">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/11/19/%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/" class="post-title-link" itemprop="url">内网穿透</a>
        </h2>

        <div class="post-meta">
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2022-11-19 11:18:15 / 修改时间：11:39:54" itemprop="dateCreated datePublished" datetime="2022-11-19T11:18:15+08:00">2022-11-19</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%9D%82%E8%B4%A7%E6%8A%80%E6%9C%AF%E6%A0%88/" itemprop="url" rel="index"><span itemprop="name">杂货技术栈</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>404</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    

   

    <div class="post-body" itemprop="articleBody">

      
          <h1 id="内网穿透"><a href="#内网穿透" class="headerlink" title="内网穿透"></a>内网穿透</h1><h2 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h2><ul>
<li>内网穿透简单来说就是让我们处于局域网的机器或者本地的项目，可以在外部的公网访问</li>
</ul>
<h3 id="常见的内网穿透工具"><a href="#常见的内网穿透工具" class="headerlink" title="常见的内网穿透工具"></a>常见的内网穿透工具</h3><ul>
<li>natapp网站</li>
<li>frp</li>
<li>ngrok</li>
<li>蜻蜓映射</li>
<li>ssh命令</li>
</ul>
<h3 id="natapp"><a href="#natapp" class="headerlink" title="natapp"></a>natapp</h3><ul>
<li>natapp网站 ： 注册账号之后会免费给你送一条隧道，不过临时用可以，不能长久用，</li>
<li>因为隧道名字会被强制更换</li>
<li>而vip隧道就不会强制更换</li>
</ul>
<h3 id="frp"><a href="#frp" class="headerlink" title="frp"></a>frp</h3><ul>
<li>frp是专业的反向代理工具</li>
<li><code>https:github.com/fatedier/frp</code></li>
<li>其中部署也非常简单 ： </li>
<li>frps在云服务器上</li>
<li>而要进行内网穿透的机器运行frpc</li>
<li>再改改配置就ok了</li>
</ul>
<h3 id="ngrok"><a href="#ngrok" class="headerlink" title="ngrok"></a>ngrok</h3><ul>
<li>属于专门做内网穿透的平台，以前是免费的不过最近好像收费了</li>
<li>注册之后我们就可以根据平台上的帮助文档进行配置，</li>
</ul>
<h3 id="蜻蜓映射"><a href="#蜻蜓映射" class="headerlink" title="蜻蜓映射"></a>蜻蜓映射</h3><ul>
<li>同上</li>
</ul>
<h3 id="ssh命令"><a href="#ssh命令" class="headerlink" title="ssh命令"></a>ssh命令</h3><ul>
<li>我们可以通过<code>ssh -R 80:localhost:80 xxxxx@localhost.run</code></li>
<li>进行反向映射端口</li>
<li>xxxx是远程云主机</li>
<li>前面的80是云主机的端口</li>
<li>后面的是本地的端口</li>
<li>这个命令是ssh自带的</li>
</ul>

      
    </div>

    
    
    

      
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://zihang.fun/2022/11/19/%E4%BD%9C%E4%B8%9A11-19/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="liu zihang">
      <meta itemprop="description" content="只有努力不会辜负你">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="枫叶冢">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/11/19/%E4%BD%9C%E4%B8%9A11-19/" class="post-title-link" itemprop="url">11-19作业</a>
        </h2>

        <div class="post-meta">
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2022-11-19 11:13:45 / 修改时间：11:17:52" itemprop="dateCreated datePublished" datetime="2022-11-19T11:13:45+08:00">2022-11-19</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E4%BD%9C%E4%B8%9A/" itemprop="url" rel="index"><span itemprop="name">作业</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>3.9k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>4 分钟</span>
            </span>

        </div>
      </header>

    
    
    

   

    <div class="post-body" itemprop="articleBody">

      
          <h1 id="通过mapreduce的api统计emp表里的每个工作的人数"><a href="#通过mapreduce的api统计emp表里的每个工作的人数" class="headerlink" title="通过mapreduce的api统计emp表里的每个工作的人数"></a>通过mapreduce的api统计emp表里的每个工作的人数</h1><ul>
<li>数据源</li>
</ul>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs apache"><br><span class="hljs-attribute">7369</span>,SMITH,CLERK,<span class="hljs-number">7902</span>,<span class="hljs-number">1980</span>-<span class="hljs-number">12</span>-<span class="hljs-number">17</span> <span class="hljs-number">14</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>,<span class="hljs-number">800</span>.<span class="hljs-number">00</span>,,<span class="hljs-number">20</span><br><span class="hljs-attribute">7499</span>,ALLEN,SALESMAN,<span class="hljs-number">7698</span>,<span class="hljs-number">1981</span>-<span class="hljs-number">02</span>-<span class="hljs-number">20</span> <span class="hljs-number">14</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>,<span class="hljs-number">1600</span>.<span class="hljs-number">00</span>,<span class="hljs-number">300</span>.<span class="hljs-number">00</span>,<span class="hljs-number">30</span><br><span class="hljs-attribute">7521</span>,WARD,SALESMAN,<span class="hljs-number">7698</span>,<span class="hljs-number">1981</span>-<span class="hljs-number">02</span>-<span class="hljs-number">22</span> <span class="hljs-number">14</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>,<span class="hljs-number">1250</span>.<span class="hljs-number">00</span>,<span class="hljs-number">500</span>.<span class="hljs-number">00</span>,<span class="hljs-number">30</span><br><span class="hljs-attribute">7566</span>,JONES,MANAGER,<span class="hljs-number">7839</span>,<span class="hljs-number">1981</span>-<span class="hljs-number">04</span>-<span class="hljs-number">02</span> <span class="hljs-number">14</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>,<span class="hljs-number">2975</span>.<span class="hljs-number">00</span>,,<span class="hljs-number">20</span><br><span class="hljs-attribute">7654</span>,MARTIN,SALESMAN,<span class="hljs-number">7698</span>,<span class="hljs-number">1981</span>-<span class="hljs-number">09</span>-<span class="hljs-number">28</span> <span class="hljs-number">13</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>,<span class="hljs-number">1250</span>.<span class="hljs-number">00</span>,<span class="hljs-number">1400</span>.<span class="hljs-number">00</span>,<span class="hljs-number">30</span><br><span class="hljs-attribute">7698</span>,BLAKE,MANAGER,<span class="hljs-number">7839</span>,<span class="hljs-number">1981</span>-<span class="hljs-number">05</span>-<span class="hljs-number">01</span> <span class="hljs-number">13</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>,<span class="hljs-number">2850</span>.<span class="hljs-number">00</span>,,<span class="hljs-number">30</span><br><span class="hljs-attribute">7782</span>,CLARK,MANAGER,<span class="hljs-number">7839</span>,<span class="hljs-number">1981</span>-<span class="hljs-number">06</span>-<span class="hljs-number">09</span> <span class="hljs-number">13</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>,<span class="hljs-number">2450</span>.<span class="hljs-number">00</span>,,<span class="hljs-number">10</span><br><span class="hljs-attribute">7788</span>,SCOTT,ANALYST,<span class="hljs-number">7566</span>,<span class="hljs-number">1982</span>-<span class="hljs-number">12</span>-<span class="hljs-number">09</span> <span class="hljs-number">14</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>,<span class="hljs-number">3000</span>.<span class="hljs-number">00</span>,,<span class="hljs-number">20</span><br><span class="hljs-attribute">7839</span>,KING,PRESIDENT,,<span class="hljs-number">1981</span>-<span class="hljs-number">11</span>-<span class="hljs-number">17</span> <span class="hljs-number">14</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>,<span class="hljs-number">5000</span>.<span class="hljs-number">00</span>,,<span class="hljs-number">10</span><br><span class="hljs-attribute">7844</span>,TURNER,SALESMAN,<span class="hljs-number">7698</span>,<span class="hljs-number">1981</span>-<span class="hljs-number">09</span>-<span class="hljs-number">08</span> <span class="hljs-number">13</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>,<span class="hljs-number">1500</span>.<span class="hljs-number">00</span>,<span class="hljs-number">0</span>.<span class="hljs-number">00</span>,<span class="hljs-number">30</span><br><span class="hljs-attribute">7876</span>,ADAMS,CLERK,<span class="hljs-number">7788</span>,<span class="hljs-number">1983</span>-<span class="hljs-number">01</span>-<span class="hljs-number">12</span> <span class="hljs-number">14</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>,<span class="hljs-number">1100</span>.<span class="hljs-number">00</span>,,<span class="hljs-number">20</span><br><span class="hljs-attribute">7900</span>,lebulang,CLERK,<span class="hljs-number">7698</span>,<span class="hljs-number">1981</span>-<span class="hljs-number">12</span>-<span class="hljs-number">03</span> <span class="hljs-number">14</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>,<span class="hljs-number">950</span>.<span class="hljs-number">00</span>,,<span class="hljs-number">30</span><br><span class="hljs-attribute">7902</span>,FORD,ANALYST,<span class="hljs-number">7566</span>,<span class="hljs-number">1981</span>-<span class="hljs-number">12</span>-<span class="hljs-number">03</span> <span class="hljs-number">14</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>,<span class="hljs-number">3000</span>.<span class="hljs-number">00</span>,,<span class="hljs-number">20</span><br><span class="hljs-attribute">7934</span>,MILLER,CLERK,<span class="hljs-number">7782</span>,<span class="hljs-number">1982</span>-<span class="hljs-number">01</span>-<span class="hljs-number">23</span> <span class="hljs-number">14</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>,<span class="hljs-number">1300</span>.<span class="hljs-number">00</span>,,<span class="hljs-number">10</span><br><span class="hljs-attribute">7839</span>,KING,PRESIDENT,,<span class="hljs-number">1981</span>-<span class="hljs-number">11</span>-<span class="hljs-number">17</span> <span class="hljs-number">14</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>,<span class="hljs-number">5000</span>.<span class="hljs-number">00</span>,,<span class="hljs-number">10</span><br><span class="hljs-attribute">7654</span>,MARTIN,SALESMAN,<span class="hljs-number">7698</span>,<span class="hljs-number">1981</span>-<span class="hljs-number">09</span>-<span class="hljs-number">28</span> <span class="hljs-number">13</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>,<span class="hljs-number">3200</span>.<span class="hljs-number">00</span>,<span class="hljs-number">1400</span>.<span class="hljs-number">00</span>,<span class="hljs-number">30</span><br><span class="hljs-attribute">7788</span>,SCOTT,ANALYST,<span class="hljs-number">7566</span>,<span class="hljs-number">1982</span>-<span class="hljs-number">12</span>-<span class="hljs-number">09</span> <span class="hljs-number">14</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>,<span class="hljs-number">3000</span>.<span class="hljs-number">00</span>,,<span class="hljs-number">20</span><br><span class="hljs-attribute">7788</span>,SCOTT,ANALYST,<span class="hljs-number">7566</span>,<span class="hljs-number">1982</span>-<span class="hljs-number">12</span>-<span class="hljs-number">09</span> <span class="hljs-number">14</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>,<span class="hljs-number">3000</span>.<span class="hljs-number">00</span>,,<span class="hljs-number">20</span><br><span class="hljs-attribute">7788</span>,SCOTT,ANALYST,<span class="hljs-number">7566</span>,<span class="hljs-number">1982</span>-<span class="hljs-number">12</span>-<span class="hljs-number">09</span> <span class="hljs-number">14</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>,<span class="hljs-number">3000</span>.<span class="hljs-number">00</span>,,<span class="hljs-number">20</span><br><span class="hljs-attribute">7788</span>,SCOTT,ANALYST,<span class="hljs-number">7566</span>,<span class="hljs-number">1982</span>-<span class="hljs-number">12</span>-<span class="hljs-number">09</span> <span class="hljs-number">14</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>,<span class="hljs-number">3000</span>.<span class="hljs-number">00</span>,,<span class="hljs-number">20</span><br><span class="hljs-attribute">7788</span>,SCOTT,ANALYST,<span class="hljs-number">7566</span>,<span class="hljs-number">1982</span>-<span class="hljs-number">12</span>-<span class="hljs-number">09</span> <span class="hljs-number">14</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>,<span class="hljs-number">3000</span>.<span class="hljs-number">00</span>,,<span class="hljs-number">20</span><br><span class="hljs-attribute">7788</span>,SCOTT,ANALYST,<span class="hljs-number">7566</span>,<span class="hljs-number">1982</span>-<span class="hljs-number">12</span>-<span class="hljs-number">09</span> <span class="hljs-number">14</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>,<span class="hljs-number">3000</span>.<span class="hljs-number">00</span>,,<span class="hljs-number">20</span><br><span class="hljs-attribute">7788</span>,SCOTT,ANALYST,<span class="hljs-number">7566</span>,<span class="hljs-number">1982</span>-<span class="hljs-number">12</span>-<span class="hljs-number">09</span> <span class="hljs-number">14</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>,<span class="hljs-number">3000</span>.<span class="hljs-number">00</span>,,<span class="hljs-number">20</span><br><span class="hljs-attribute">7788</span>,SCOTT,ANALYST,<span class="hljs-number">7566</span>,<span class="hljs-number">1982</span>-<span class="hljs-number">12</span>-<span class="hljs-number">09</span> <span class="hljs-number">14</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>,<span class="hljs-number">3000</span>.<span class="hljs-number">00</span>,,<span class="hljs-number">20</span><br><span class="hljs-attribute">7788</span>,SCOTT,ANALYST,<span class="hljs-number">7566</span>,<span class="hljs-number">1982</span>-<span class="hljs-number">12</span>-<span class="hljs-number">09</span> <span class="hljs-number">14</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>,<span class="hljs-number">3000</span>.<span class="hljs-number">00</span>,,<span class="hljs-number">20</span><br><span class="hljs-attribute">7788</span>,SCOTT,ANALYST,<span class="hljs-number">7566</span>,<span class="hljs-number">1982</span>-<span class="hljs-number">12</span>-<span class="hljs-number">09</span> <span class="hljs-number">14</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>,<span class="hljs-number">3000</span>.<span class="hljs-number">00</span>,,<span class="hljs-number">20</span><br><span class="hljs-attribute">7788</span>,SCOTT,ANALYST,<span class="hljs-number">7566</span>,<span class="hljs-number">1982</span>-<span class="hljs-number">12</span>-<span class="hljs-number">09</span> <span class="hljs-number">14</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>,<span class="hljs-number">3000</span>.<span class="hljs-number">00</span>,,<span class="hljs-number">20</span><br><br><br></code></pre></td></tr></table></figure>

<ul>
<li><p>其中第二列就是工作</p>
</li>
<li><p>代码如下 ：</p>
</li>
</ul>
<figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><code class="hljs processing"><br><span class="hljs-keyword">package</span> org.<span class="hljs-property">example</span>;<br><br><br><span class="hljs-keyword">import</span> org.<span class="hljs-property">apache</span>.<span class="hljs-property">hadoop</span>.<span class="hljs-property">conf</span>.<span class="hljs-property">Configuration</span>;<br><span class="hljs-keyword">import</span> org.<span class="hljs-property">apache</span>.<span class="hljs-property">hadoop</span>.<span class="hljs-property">fs</span>.<span class="hljs-property">Path</span>;<br><span class="hljs-keyword">import</span> org.<span class="hljs-property">apache</span>.<span class="hljs-property">hadoop</span>.<span class="hljs-property">io</span>.<span class="hljs-property">IntWritable</span>;<br><span class="hljs-keyword">import</span> org.<span class="hljs-property">apache</span>.<span class="hljs-property">hadoop</span>.<span class="hljs-property">io</span>.<span class="hljs-property">Text</span>;<br><span class="hljs-keyword">import</span> org.<span class="hljs-property">apache</span>.<span class="hljs-property">hadoop</span>.<span class="hljs-property">mapreduce</span>.<span class="hljs-property">Job</span>;<br><span class="hljs-keyword">import</span> org.<span class="hljs-property">apache</span>.<span class="hljs-property">hadoop</span>.<span class="hljs-property">mapreduce</span>.<span class="hljs-property">Mapper</span>;<br><span class="hljs-keyword">import</span> org.<span class="hljs-property">apache</span>.<span class="hljs-property">hadoop</span>.<span class="hljs-property">mapreduce</span>.<span class="hljs-property">Reducer</span>;<br><span class="hljs-keyword">import</span> org.<span class="hljs-property">apache</span>.<span class="hljs-property">hadoop</span>.<span class="hljs-property">mapreduce</span>.<span class="hljs-property">lib</span>.<span class="hljs-property">input</span>.<span class="hljs-property">FileInputFormat</span>;<br><span class="hljs-keyword">import</span> org.<span class="hljs-property">apache</span>.<span class="hljs-property">hadoop</span>.<span class="hljs-property">mapreduce</span>.<span class="hljs-property">lib</span>.<span class="hljs-property">output</span>.<span class="hljs-property">FileOutputFormat</span>;<br><br><span class="hljs-keyword">import</span> java.<span class="hljs-property">io</span>.<span class="hljs-property">IOException</span>;<br><span class="hljs-keyword">import</span> java.<span class="hljs-property">util</span>.<span class="hljs-property">StringTokenizer</span>;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * @author sxwang</span><br><span class="hljs-comment"> * 11 18 14:00</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">test</span> &#123;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * driver</span><br><span class="hljs-comment">     * @param args</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span>(<span class="hljs-built_in">String</span>[] args) <span class="hljs-keyword">throws</span> Exception &#123;<br><br>        <span class="hljs-built_in">String</span> input=<span class="hljs-string">&quot;D://emp.txt&quot;</span>;<br>        <span class="hljs-built_in">String</span> output=<span class="hljs-string">&quot;out&quot;</span>;<br>        Configuration conf = <span class="hljs-keyword">new </span><span class="hljs-class title_">Configuration</span>();<br>        <span class="hljs-comment">//0.todo... 删除目标路径</span><br>        FileUtils.<span class="hljs-property">deletePath</span>(conf,output);<br><br>        <span class="hljs-comment">//1.设置 作业名称</span><br>        Job job = Job.<span class="hljs-property">getInstance</span>(conf, <span class="hljs-string">&quot;WCAPP&quot;</span>);<br>        <span class="hljs-comment">//2.设置map reduce 执行代码的主类</span><br>        job.<span class="hljs-property">setJarByClass</span>(test.<span class="hljs-property">class</span>);<br>        job.<span class="hljs-property">setMapperClass</span>(MyMapper.<span class="hljs-property">class</span>);<br>        job.<span class="hljs-property">setReducerClass</span>(MyReducer.<span class="hljs-property">class</span>);<br>        <span class="hljs-comment">//3.指定 oupput kv类型</span><br>        job.<span class="hljs-property">setOutputKeyClass</span>(Text.<span class="hljs-property">class</span>);<br>        job.<span class="hljs-property">setOutputValueClass</span>(IntWritable.<span class="hljs-property">class</span>);<br>        <span class="hljs-comment">//4. 设置数据源路径 数据输出路径</span><br>        FileInputFormat.<span class="hljs-property">addInputPath</span>(job, <span class="hljs-keyword">new </span><span class="hljs-class title_">Path</span>(input));<br>        FileOutputFormat.<span class="hljs-property">setOutputPath</span>(job, <span class="hljs-keyword">new </span><span class="hljs-class title_">Path</span>(output));<br>        <span class="hljs-comment">//5. 提交mr yarn</span><br>        System.<span class="hljs-property">exit</span>(job.<span class="hljs-property">waitForCompletion</span>(<span class="hljs-literal">true</span>) ? <span class="hljs-number">0</span> : <span class="hljs-number">1</span>);<br><br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * mapper</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyMapper</span><br>            <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Mapper</span>&lt;<span class="hljs-built_in">Object</span>, Text, Text, IntWritable&gt; &#123;<br><br>        @Override<br>        <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-built_in">map</span>(<span class="hljs-built_in">Object</span> <span class="hljs-built_in">key</span>, Text value, Context context) <span class="hljs-keyword">throws</span> IOException, InterruptedException &#123;<br>            <span class="hljs-comment">/**</span><br><span class="hljs-comment">             * 1.按照分隔符 进行拆分 每个单词 ，每个单词赋值为1</span><br><span class="hljs-comment">             * (word ,1)</span><br><span class="hljs-comment">             */</span><br><br>            <span class="hljs-built_in">String</span>[] words = value.<span class="hljs-property">toString</span>().<span class="hljs-property">split</span>(<span class="hljs-string">&quot;\n&quot;</span>);<br><br>            <span class="hljs-keyword">for</span> (<span class="hljs-built_in">String</span> word : words) &#123;<br>                <span class="hljs-built_in">String</span>[] <span class="hljs-built_in">split</span> = word.<span class="hljs-property">split</span>(<span class="hljs-string">&quot;,&quot;</span>);<br>                context.<span class="hljs-property">write</span>(<span class="hljs-keyword">new </span><span class="hljs-class title_">Text</span>(<span class="hljs-built_in">split</span>[<span class="hljs-number">2</span>]) ,<span class="hljs-keyword">new </span><span class="hljs-class title_">IntWritable</span>(<span class="hljs-number">1</span>));<br>            &#125;<br><br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * reducer</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyReducer</span><br>            <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Reducer</span>&lt;Text,IntWritable,Text,IntWritable&gt; &#123;<br><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         *  (word ,1)</span><br><span class="hljs-comment">         *</span><br><span class="hljs-comment">         *  (word,&lt;1,1,1,1&gt;)</span><br><span class="hljs-comment">         *</span><br><span class="hljs-comment">         *  1.聚合value</span><br><span class="hljs-comment">         *</span><br><span class="hljs-comment">         *  2.写出去</span><br><span class="hljs-comment">         *  (word ,3)</span><br><span class="hljs-comment">         */</span><br>        @Override<br>        <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">reduce</span>(Text <span class="hljs-built_in">key</span>, Iterable&lt;IntWritable&gt; values, Context context) <span class="hljs-keyword">throws</span> IOException, InterruptedException &#123;<br>            <span class="hljs-type">int</span> sum=<span class="hljs-number">0</span>;<br>            <span class="hljs-keyword">for</span> (IntWritable value : values) &#123;<br>                sum +=Integer.<span class="hljs-property">parseInt</span>(value.<span class="hljs-property">toString</span>());<br>            &#125;<br>            context.<span class="hljs-property">write</span>(<span class="hljs-built_in">key</span>,<span class="hljs-keyword">new </span><span class="hljs-class title_">IntWritable</span>(sum));<br>        &#125;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>

<ul>
<li>基本概念 ： 把数据先通过map进行etl，然后通过redurce进行数据的整合之类的</li>
<li>最后输出</li>
</ul>

      
    </div>

    
    
    

      
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://zihang.fun/2022/11/17/%E5%9D%91/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="liu zihang">
      <meta itemprop="description" content="只有努力不会辜负你">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="枫叶冢">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/11/17/%E5%9D%91/" class="post-title-link" itemprop="url">踩过的坑</a>
        </h2>

        <div class="post-meta">
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-11-17 19:47:34" itemprop="dateCreated datePublished" datetime="2022-11-17T19:47:34+08:00">2022-11-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-12-11 17:19:17" itemprop="dateModified" datetime="2022-12-11T17:19:17+08:00">2022-12-11</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%97%A5%E5%BF%97/" itemprop="url" rel="index"><span itemprop="name">日志</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>3.3k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>3 分钟</span>
            </span>

        </div>
      </header>

    
    
    

   

    <div class="post-body" itemprop="articleBody">

      
          <h1 id="修改windows下的hosts文件不生效"><a href="#修改windows下的hosts文件不生效" class="headerlink" title="修改windows下的hosts文件不生效"></a>修改windows下的hosts文件不生效</h1><ul>
<li>这个坑一直卡了我三四天</li>
<li>配置完hadoop集群，进行web访问的时候出现了这个问题</li>
<li>因为windows的主机映射不好使，所以我无法在网页端查看数据</li>
</ul>
<h2 id="解决办法"><a href="#解决办法" class="headerlink" title="解决办法"></a>解决办法</h2><ul>
<li>我这里解决这个的办法是通过</li>
<li>把中间空格放大的方法</li>
<li>就是一个小空格加一个tab键</li>
<li>然后进入 <code>edge://net-internals</code>或者 <code>chrome://net-internals</code></li>
<li>这取决于你的浏览器</li>
<li>然后 <code>win + x</code> 查看windows powershell（管理员）打开之后执行 <code> ipconfig /flushdns</code></li>
<li>刷新之后就可以通过映射访问了</li>
</ul>
<h1 id="有关于idea关于Hadoop的api的copyToLocalfile不生效"><a href="#有关于idea关于Hadoop的api的copyToLocalfile不生效" class="headerlink" title="有关于idea关于Hadoop的api的copyToLocalfile不生效"></a>有关于idea关于Hadoop的api的copyToLocalfile不生效</h1><ul>
<li>报错信息 <code>java.io.FileNotFoundException: HADOOP_HOME and hadoop.home.dir are unset.</code></li>
<li>这个是代表你windows里没有配置hadoop环境</li>
<li>我们可以不用他提供的api</li>
<li>通过</li>
</ul>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><br>FSDataInputStream fis = fs.<span class="hljs-keyword">open</span>(<span class="hljs-keyword">new</span> <span class="hljs-constructor">Path(<span class="hljs-string">&quot;/date&quot;</span>)</span>); <span class="hljs-comment">// hdfs上的文件</span><br>OutputStream outputStream = <span class="hljs-keyword">new</span> <span class="hljs-constructor">FileOutputStream( <span class="hljs-params">new</span> File(<span class="hljs-string">&quot;D:\\ bg1.txt&quot;</span>)</span> , <span class="hljs-literal">false</span>); <span class="hljs-comment">// 本地的存储地点</span><br><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">IOUtils</span>.</span></span>copy<span class="hljs-constructor">Bytes(<span class="hljs-params">fis</span>,<span class="hljs-params">outputStream</span>,4096 , <span class="hljs-params">true</span>)</span>;<br><br></code></pre></td></tr></table></figure>

<ul>
<li>就可以实现下载</li>
</ul>
<h1 id="关于linux里的mysql会自动识别大小写表名的事情"><a href="#关于linux里的mysql会自动识别大小写表名的事情" class="headerlink" title="关于linux里的mysql会自动识别大小写表名的事情"></a>关于linux里的mysql会自动识别大小写表名的事情</h1><p>linux里的mysql会自动对表名进行大小写区分，这可能导致一些boot项目启动的时候找不到表名</p>
<p>如何更改如下</p>
<p>首先查看自己的表名大小写权限是不是打开了</p>
<p>先在mysql里执行</p>
<p><code>show variables like &quot;%case%&quot;;</code></p>
<p>查看一下我们的权限打没打开</p>
<p>一般默认的时候会有个off的选项</p>
<p>这个是默认的情况</p>
<p>接下来我们对其进行修改</p>
<p>我们首先退出mysql</p>
<p>然后关闭mysql服务输入 ： <code>mysqladmin -uroot -p shutdown //以安全模式关闭数据库</code></p>
<p>接下来输入密码就关闭了</p>
<p>然后编辑mysql的配置文件</p>
<p>输入 ： <code>vim /etc/my.cnf</code></p>
<p>在mysqld下添加一行</p>
<p><code>lower_case_table_names=1</code></p>
<p>然后退出保存即可</p>
<p>最后要重新启动mysql输入 ： <code>systemctl resatrt mysqld</code></p>
<p>就可以了</p>
<h1 id="mysql误删了配置文件-performance-schema的恢复"><a href="#mysql误删了配置文件-performance-schema的恢复" class="headerlink" title="mysql误删了配置文件 performance_schema的恢复"></a>mysql误删了配置文件 performance_schema的恢复</h1><p>首先我们退出mysql</p>
<p>然后输入 <code>mysql_upgrade -u root -p </code></p>
<p>输入我们的密码之后</p>
<p>然后重新登录我们的mysql就会出现了</p>
<h1 id="npm怎么清除缓存"><a href="#npm怎么清除缓存" class="headerlink" title="npm怎么清除缓存"></a>npm怎么清除缓存</h1><p>首先关于npm进行清除缓存</p>
<p>先明确自己的npm的版本</p>
<p>如果npm version &lt; 7.0.0</p>
<p><code>$ npm cache clean -f</code></p>
<p>npm version ≧ 7.0.0 会报以下错误</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ npm cache cleannpm ERR! As of npm@5, the npm cache self-heals from corruption issues<br>npm ERR! by treating integrity mismatches as cache misses.  As a result,<br>npm ERR! data extracted from the cache is guaranteed to be valid.  If you<br>npm ERR! want to make sure everything is consistent, use npm cache verify<br>npm ERR! instead.  Deleting the cache can only make npm go slower, and is<br>npm ERR! not likely to correct any problems you may be encountering!<br>npm ERR!<br>npm ERR! On the other hand, <span class="hljs-keyword">if</span> you<span class="hljs-string">&#x27;re debugging an issue with the installer,</span><br><span class="hljs-string">npm ERR! or race conditions that depend on the timing of writing to an empty</span><br><span class="hljs-string">npm ERR! cache, you can use npm install --cache /tmp/empty-cache to use a</span><br><span class="hljs-string">npm ERR! temporary cache instead of nuking the actual one.</span><br><span class="hljs-string">npm ERR!</span><br><span class="hljs-string">npm ERR! If you&#x27;</span>re sure you want to delete the entire cache, rerun this <span class="hljs-built_in">command</span><br>npm ERR! with --force.npm ERR! A complete <span class="hljs-built_in">log</span> of this run can be found <span class="hljs-keyword">in</span>:<br>npm ERR!     /Users/xxxxxx/.npm/_logs/2021-02-04T06_35_38_043Z-debug.log<br></code></pre></td></tr></table></figure>

<p>如果想强制清除缓存就要用–force</p>
<h1 id="关于npm设置镜像源"><a href="#关于npm设置镜像源" class="headerlink" title="关于npm设置镜像源"></a>关于npm设置镜像源</h1><p><code>npm config set registry http://registry.npm.taobao.org</code></p>
<p>然后就把淘宝镜像源加进入了</p>
<h1 id="Git之本地分支和远程分支建立追踪关系的几种方式"><a href="#Git之本地分支和远程分支建立追踪关系的几种方式" class="headerlink" title="Git之本地分支和远程分支建立追踪关系的几种方式"></a>Git之本地分支和远程分支建立追踪关系的几种方式</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">git branch --set-upstream-to=origin/remote_branch your_branch<br>origin/remote_branch是你本地分支对应的远程分支；your_branch是你当前的本地分支。<br></code></pre></td></tr></table></figure>

<p>或者之间checkout -b 根据远程建立本地分支</p>
<h1 id="git-删除远程分支"><a href="#git-删除远程分支" class="headerlink" title="git 删除远程分支"></a>git 删除远程分支</h1><p><code> git push origin --delete [branch_name]</code></p>
<h1 id="云服务器内存不够，设置swap交换分区"><a href="#云服务器内存不够，设置swap交换分区" class="headerlink" title="云服务器内存不够，设置swap交换分区"></a>云服务器内存不够，设置swap交换分区</h1><p>闲来无事自己用云主机搭建了一台gitlab，但是由于云主机是2G2核的在刚开始布置完成之后，访问的时候时常会502</p>
<p>就是服务器的内存被占据太多了，无法响应导致的</p>
<p>然后就想办法设置交换分区解决这个问题</p>
<p>首先要在root 用户下</p>
<p>然后是创建交换分区的文件 <code>/file/swap</code></p>
<p>然后执行 <code>dd if=/dev/zero of=/file/swap bs=1024 count=4096000</code></p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gradle"><span class="hljs-regexp">/dev/</span>zero是输入，<span class="hljs-regexp">/file/</span>swap是交换文件位置，路径得存在，bs读/写的块大小，<span class="hljs-keyword">count</span>是swap大小<br></code></pre></td></tr></table></figure>

<p>然后执行 <code>mkswap /file/swap</code></p>
<p>把第一步的文件设置成swap交换区</p>
<p>启用swap交换分区</p>
<p><code>swapon /file/swap</code></p>
<p>设置成开机挂载交换区</p>
<p><code>echo &quot;/file/swap swap swap defaults 0 0&quot; &gt;&gt; /etc/fstab</code></p>
<p>设置启动的条件</p>
<p><code>vim /etc/sysctl.conf 将vm.swappiness = 0值改为50</code></p>
<figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs avrasm">这个值是如何使用<span class="hljs-keyword">swap</span>分区值越大越积极使用<span class="hljs-keyword">swap</span>分区，越小表示越积极使用物理内存，wappiness=<span class="hljs-number">50</span>，表示内存使用率超过<span class="hljs-number">100</span><span class="hljs-number">-50</span>=<span class="hljs-number">50</span>%时开始使用交换分区，swappiness=<span class="hljs-number">0</span>时不使用swapswappiness＝<span class="hljs-number">100</span>的时候表示积极使用<span class="hljs-keyword">swap</span>分区，并把内存上的数据及时搬运到<span class="hljs-keyword">swap</span>空间<br></code></pre></td></tr></table></figure>

<p>加载参数</p>
<p><code>sysctl -p</code></p>
<h1 id="git出现fatal-the-remote-end-hung-up-unexpectedly"><a href="#git出现fatal-the-remote-end-hung-up-unexpectedly" class="headerlink" title="git出现fatal: the remote end hung up unexpectedly"></a>git出现<strong>fatal: the remote end hung up unexpectedly</strong></h1><p>上传项目报fatal: the remote end hung up unexpectedly的错误，</p>
<p>应该是项目太大的原因， 要么是网络不行，要么墙的原因</p>
<p>解决办法：<br>修改提交缓存大小为500M，或者更大的数字<br>git config –global http.postBuffer 524288000</p>
<p>some comments below report having to double the value:</p>
<p>git config –global http.postBuffer 1048576000</p>
<p>或者是 在克隆&#x2F;创建版本库生成的 .git&#x2F;config 文件中加入:</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-section">[http]</span><br><span class="hljs-attr">postBuffer</span> = <span class="hljs-number">524288000</span><br></code></pre></td></tr></table></figure>

      
    </div>

    
    
    

      
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://zihang.fun/2022/11/17/11-17/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="liu zihang">
      <meta itemprop="description" content="只有努力不会辜负你">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="枫叶冢">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/11/17/11-17/" class="post-title-link" itemprop="url">hadoop面试会问</a>
        </h2>

        <div class="post-meta">
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-11-17 19:47:10" itemprop="dateCreated datePublished" datetime="2022-11-17T19:47:10+08:00">2022-11-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-11-18 12:53:12" itemprop="dateModified" datetime="2022-11-18T12:53:12+08:00">2022-11-18</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%97%A5%E5%BF%97/" itemprop="url" rel="index"><span itemprop="name">日志</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>2.1k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>2 分钟</span>
            </span>

        </div>
      </header>

    
    
    

   

    <div class="post-body" itemprop="articleBody">

      
          <h1 id="hdfs的写流程"><a href="#hdfs的写流程" class="headerlink" title="hdfs的写流程"></a>hdfs的写流程</h1><ul>
<li>面试|必备</li>
<li>通过客户端，写文件</li>
<li>首先客户端会调用 FileSystem 的creat</li>
<li>去和namenode进行通信 ， 是通过rpc通信</li>
<li>然后namenode会去检查这个路径的文件是不是存在并且检查你的权限</li>
<li>假如都ok ， 则执行你的操作</li>
<li>但是这个时候还没有写数据</li>
<li>是不关联任何block的</li>
<li>而namenode根据上传文件的大小，和块的大小，以及副本数</li>
<li>计算要上传多少块以及后续要在datanode上的什么位置</li>
<li>最后把信息返回到客户端</li>
<li>就是 ： fsdataoutputstream</li>
<li>Client 调用 fdsdataoutputstream</li>
<li>将第一个块的第一个副本数写第一个dn节点</li>
<li>写完去写第二个</li>
<li>然后是第三个</li>
<li>当三个都写完了 ， 会返回一个ack package</li>
<li>把确认包给dn2</li>
<li>当dn2确认并加上自己的</li>
<li>然后给dn3，同上</li>
<li>最后将ack package 返回给 fdsdataoutputstream</li>
<li>上面只是对于第一个块</li>
<li>当所有的块全部写完的时候，我们会调用</li>
<li>这个流对象的close方法</li>
<li>告诉namenode ，文件写入成功</li>
</ul>
<h1 id="hdfs读操作"><a href="#hdfs读操作" class="headerlink" title="hdfs读操作"></a>hdfs读操作</h1><ul>
<li>面试|必备</li>
<li>Cilent调用FS.open(filepath)</li>
<li>nn和pc进行通信，返回该文件的部分或者全部的block列表</li>
<li>以fdsdatainputstream的形式</li>
<li>Client的FSDDataInputstream的read方法</li>
<li>会去和最近的dn进行匹配，读取完成</li>
<li>会check，假如ok，就关闭通信</li>
<li>假如读取失败</li>
<li>会记录dn+block信息</li>
<li>下次就也不会从这个节点读取，转而从其他的节点读取</li>
<li>然后会去和第二块的最近的dn进行读取，以此类推</li>
<li>当整个block全部读取完之后，文件还没读取完，就会继续调用fs的方法进行下一次block的读取</li>
<li>以此类推</li>
<li>最后用close方法关闭</li>
</ul>
<h1 id="hdfs的副本放置策略"><a href="#hdfs的副本放置策略" class="headerlink" title="hdfs的副本放置策略"></a>hdfs的副本放置策略</h1><ul>
<li>机架</li>
<li>生产上读写操作，选择dn节点进行读取</li>
<li>第一副本 ： </li>
<li>放置在client上传的dn节点</li>
<li>client 不在dn节点 ，就随机选择一个dn</li>
<li>第二副本 ： </li>
<li>放置在第一个副本不同的机架上的一个dn节点</li>
<li>第三副本 ： </li>
<li>和第二副本相同机架但是不同节点</li>
<li>补充 ；</li>
<li>副本数是三</li>
<li>上述都是以副本数为3的情况</li>
<li>如果是4就多几个随机</li>
</ul>
<h1 id="hdfs的安全模式"><a href="#hdfs的安全模式" class="headerlink" title="hdfs的安全模式"></a>hdfs的安全模式</h1><ul>
<li>什么时候会发生安全模式</li>
<li>刚启动hadoop的时候</li>
<li>hsdf发生故障的时候 ： 集群文件大量会丢失</li>
<li>人为进入</li>
<li>命令 ： <code>hdfs dfsadmin -safemode &lt;enter | leave | get | wait | forceExit&gt;</code></li>
</ul>
<h1 id="补充"><a href="#补充" class="headerlink" title="补充"></a>补充</h1><ul>
<li>kill 命令 不只有一个-9</li>
<li>还有很多 ： 目前我所看见的至少有64个</li>
</ul>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs apache"><br><br><span class="hljs-attribute">1</span>) SIGHUP     <span class="hljs-number">2</span>) SIGINT     <span class="hljs-number">3</span>) SIGQUIT     <span class="hljs-number">4</span>) SIGILL     <span class="hljs-number">5</span>) SIGTRAP<br><span class="hljs-attribute">6</span>) SIGABRT     <span class="hljs-number">7</span>) SIGBUS     <span class="hljs-number">8</span>) SIGFPE     <span class="hljs-number">9</span>) SIGKILL    <span class="hljs-number">10</span>) SIGUSR1<br><span class="hljs-attribute">11</span>) SIGSEGV    <span class="hljs-number">12</span>) SIGUSR2    <span class="hljs-number">13</span>) SIGPIPE    <span class="hljs-number">14</span>) SIGALRM    <span class="hljs-number">15</span>) SIGTERM<br><span class="hljs-attribute">16</span>) SIGSTKFLT    <span class="hljs-number">17</span>) SIGCHLD    <span class="hljs-number">18</span>) SIGCONT    <span class="hljs-number">19</span>) SIGSTOP    <span class="hljs-number">20</span>) SIGTSTP<br><span class="hljs-attribute">21</span>) SIGTTIN    <span class="hljs-number">22</span>) SIGTTOU    <span class="hljs-number">23</span>) SIGURG    <span class="hljs-number">24</span>) SIGXCPU    <span class="hljs-number">25</span>) SIGXFSZ<br><span class="hljs-attribute">26</span>) SIGVTALRM    <span class="hljs-number">27</span>) SIGPROF    <span class="hljs-number">28</span>) SIGWINCH    <span class="hljs-number">29</span>) SIGIO    <span class="hljs-number">30</span>) SIGPWR<br><span class="hljs-attribute">31</span>) SIGSYS    <span class="hljs-number">34</span>) SIGRTMIN    <span class="hljs-number">35</span>) SIGRTMIN+<span class="hljs-number">1</span>    <span class="hljs-number">36</span>) SIGRTMIN+<span class="hljs-number">2</span>    <span class="hljs-number">37</span>) SIGRTMIN+<span class="hljs-number">3</span><br><span class="hljs-attribute">38</span>) SIGRTMIN+<span class="hljs-number">4</span>    <span class="hljs-number">39</span>) SIGRTMIN+<span class="hljs-number">5</span>    <span class="hljs-number">40</span>) SIGRTMIN+<span class="hljs-number">6</span>    <span class="hljs-number">41</span>) SIGRTMIN+<span class="hljs-number">7</span>    <span class="hljs-number">42</span>) SIGRTMIN+<span class="hljs-number">8</span><br><span class="hljs-attribute">43</span>) SIGRTMIN+<span class="hljs-number">9</span>    <span class="hljs-number">44</span>) SIGRTMIN+<span class="hljs-number">10</span>    <span class="hljs-number">45</span>) SIGRTMIN+<span class="hljs-number">11</span>    <span class="hljs-number">46</span>) SIGRTMIN+<span class="hljs-number">12</span>    <span class="hljs-number">47</span>) SIGRTMIN+<span class="hljs-number">13</span><br><span class="hljs-attribute">48</span>) SIGRTMIN+<span class="hljs-number">14</span>    <span class="hljs-number">49</span>) SIGRTMIN+<span class="hljs-number">15</span>    <span class="hljs-number">50</span>) SIGRTMAX-<span class="hljs-number">14</span>    <span class="hljs-number">51</span>) SIGRTMAX-<span class="hljs-number">13</span>    <span class="hljs-number">52</span>) SIGRTMAX-<span class="hljs-number">12</span><br><span class="hljs-attribute">53</span>) SIGRTMAX-<span class="hljs-number">11</span>    <span class="hljs-number">54</span>) SIGRTMAX-<span class="hljs-number">10</span>    <span class="hljs-number">55</span>) SIGRTMAX-<span class="hljs-number">9</span>    <span class="hljs-number">56</span>) SIGRTMAX-<span class="hljs-number">8</span>    <span class="hljs-number">57</span>) SIGRTMAX-<span class="hljs-number">7</span><br><span class="hljs-attribute">58</span>) SIGRTMAX-<span class="hljs-number">6</span>    <span class="hljs-number">59</span>) SIGRTMAX-<span class="hljs-number">5</span>    <span class="hljs-number">60</span>) SIGRTMAX-<span class="hljs-number">4</span>    <span class="hljs-number">61</span>) SIGRTMAX-<span class="hljs-number">3</span>    <span class="hljs-number">62</span>) SIGRTMAX-<span class="hljs-number">2</span><br><span class="hljs-attribute">63</span>) SIGRTMAX-<span class="hljs-number">1</span>    <span class="hljs-number">64</span>) SIGRTMAX<br><br></code></pre></td></tr></table></figure>

<ul>
<li>这个简单介绍几个 ： </li>
<li>1 ： 重新加载合格进程</li>
<li>9 ： 杀死一个进程</li>
<li>15 ： 正常停止一个进程</li>
</ul>
<h1 id="公司内部的逻辑"><a href="#公司内部的逻辑" class="headerlink" title="公司内部的逻辑"></a>公司内部的逻辑</h1><ul>
<li>一般一个组件都会有一个用户进行管理</li>
<li>比如 ： mysql ： 可以创建一个mysql用户</li>
<li>等</li>
<li>创建数据库的流程 ： </li>
<li><code>create dataase dl2262;</code></li>
<li><code>grant all priviledges on dl2262 identified by &quot;1234546;&quot;</code></li>
<li><code>flush priviledges;</code></li>
</ul>
<h1 id="hdfs生产最佳实践"><a href="#hdfs生产最佳实践" class="headerlink" title="hdfs生产最佳实践"></a>hdfs生产最佳实践</h1><ul>
<li>如何查看hdfs的文件块是不是丢失<br>-<code>hdfs fsck&lt;path&gt;</code></li>
</ul>
<h2 id="hdfs-的block块丢失了如何解决"><a href="#hdfs-的block块丢失了如何解决" class="headerlink" title="hdfs 的block块丢失了如何解决"></a>hdfs 的block块丢失了如何解决</h2><ul>
<li>第一种 ： 不用解决 ，也因为hdfs会自动回复，一般是6h ， 就是dn上传的时候</li>
<li>第二种 ： 手动进行回复</li>
<li><code>hdfs debug recoverLease -path &lt;filename&gt; retries num</code> </li>
<li>后面的是重试次数</li>
</ul>

      
    </div>

    
    
    

      
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="liu zihang"
      src="/images/avatar.png">
  <p class="site-author-name" itemprop="name">liu zihang</p>
  <div class="site-description" itemprop="description">只有努力不会辜负你</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">44</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">8</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
  </nav>
</div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      链接网站
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://baidu.com/" title="https:&#x2F;&#x2F;baidu.com" rel="noopener" target="_blank">百度</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://fishc.com.cn/" title="https:&#x2F;&#x2F;fishc.com.cn" rel="noopener" target="_blank">鱼C论坛</a>
        </li>
    </ul>
  </div>

      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">liu zihang</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

<div class="theme-info">
  <div class="powered-by"></div>
  <span class="post-count">博客全站共94.6k字</span>
</div>


    <script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

    <span id="busuanzi_container_site_pv">总访问量<span id="busuanzi_value_site_pv"></span>次</span>
    <span class="post-meta-divider">|</span>
    <span id="busuanzi_container_site_uv">总访客数<span id="busuanzi_value_site_uv"></span>人</span>
    <span class="post-meta-divider">|</span>
<!-- 不蒜子计数初始值纠正 -->
<script>
$(document).ready(function() {

    var int = setInterval(fixCount, 50);  // 50ms周期检测函数
    var countOffset = 20000;  // 初始化首次数据

    function fixCount() {            
       if (document.getElementById("busuanzi_container_site_pv").style.display != "none")
        {
            $("#busuanzi_value_site_pv").html(parseInt($("#busuanzi_value_site_pv").html()) + countOffset); 
            clearInterval(int);
        }                  
        if ($("#busuanzi_container_site_pv").css("display") != "none")
        {
            $("#busuanzi_value_site_uv").html(parseInt($("#busuanzi_value_site_uv").html()) + countOffset); // 加上初始数据 
            clearInterval(int); // 停止检测
        }  
    }
       	
});
</script> 

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  
  <script color='0,0,255' opacity='0.5' zIndex='-1' count='99' src="/lib/canvas-nest/canvas-nest.min.js"></script>
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

  


</body>
</html>
